<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Crux Framework 5 Manual</title><link rel="stylesheet" type="text/css" href="style.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"/></head><body><div class="book" id="d5e1"><div class="titlepage"><div><div><h1 class="title">Crux Framework 5 Manual</h1></div><div><div class="authorgroup">
		<div class="author"><h3 class="author"><span class="firstname">Thiago</span> <span class="surname">Bustamente</span></h3><div class="affiliation">
				<span class="orgname">Triggo Labs<br/></span>
			</div></div>
	</div></div><div><p class="pubdate">2013</p></div></div><hr/></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="chapter"><a href="#chp_intro">1. Introdução</a></span><ul><li><span class="sect1"><a href="#sec_CruxOqueE">1.1. O que é o Crux?</a></span></li><li><span class="sect1"><a href="#sec_CruxArtefatos">1.2. Crux Artefatos e Projetos</a></span></li><li><span class="sect1"><a href="#sec_Exemplo">1.3. Exemplo</a></span></li></ul></li><li><span class="chapter"><a href="#chp_quickstart">2. Quick Start</a></span></li><li><span class="chapter"><a href="#chp_inst_conf">3. Instalação e Configuração</a></span><ul><li><span class="sect1"><a href="#sec_inst_maven">3.1. Via Maven Archetype</a></span></li><li><span class="sect1"><a href="#sec_inst_manual">3.2. Manualmente</a></span></li></ul></li><li><span class="chapter"><a href="#chp_architecture">4. Visão Arquitetura</a></span></li><li><span class="chapter"><a href="#chp_view">5. Camada de Visão</a></span><ul><li><span class="sect1"><a href="#sec_view_concepts">5.1.  Conceitos Principais</a></span></li><li><span class="sect1"><a href="#sec_view_screen">5.2. Screen</a></span><ul><li><span class="sect2"><a href="#sec_view_screen_atrib">5.2.1. Atributos da Screen</a></span></li><li><span class="sect2"><a href="#sec_view_screen_event">5.2.2. Eventos da Screen</a></span></li></ul></li><li><span class="sect1"><a href="#sec_view_view">5.3. View</a></span><ul><li><span class="sect2"><a href="#sec_view_view_atrib">5.3.1. Atributos da View</a></span></li><li><span class="sect2"><a href="#sec_view_view_event">5.3.2. Eventos da View</a></span></li></ul></li><li><span class="sect1"><a href="#sec_view_template">5.4. Template</a></span><ul><li><span class="sect2"><a href="#sec_view_template_parameter">5.4.1. Parametrizando Templates</a></span></li><li><span class="sect2"><a href="#sec_view_template_component">5.4.2. Templates de Blocos</a></span></li><li><span class="sect2"><a href="#sec_view_template_layout">5.4.3. Templates de Layouts</a></span></li></ul></li><li><span class="sect1"><a href="#sec_view_events_call">5.5. Chamada de Eventos</a></span></li></ul></li><li><span class="chapter"><a href="#chp_controller">6. Camada de Controle</a></span><ul><li><span class="sect1"><a href="#sec_control_anot">6.1. Anotações das <span class="italic">Controllers</span></a></span><ul><li><span class="sect2"><a href="#sec_control_anot_controler">6.1.1. @Controller </a></span></li><li><span class="sect2"><a href="#sec_control_anot_inject">6.1.2. @Inject</a></span></li><li><span class="sect2"><a href="#sec_control_anot_expose">6.1.3. @Expose</a></span></li></ul></li><li><span class="sect1"><a href="#sec_control_ioc">6.2. Inversion of Control (IoC)</a></span><ul><li><span class="sect2"><a href="#sec_control_ioc_scope">6.2.1. Escopo dos objetos criados</a></span></li><li><span class="sect2"><a href="#sec_control_ioc_conf">6.2.2. Configurações globais do container</a></span></li></ul></li><li><span class="sect1"><a href="#sec_control_valuebind">6.3. Value Binding</a></span></li><li><span class="sect1"><a href="#sec_control_screen">6.4. Usando as Controllers na View</a></span></li><li><span class="sect1"><a href="#sec_control_comunic">6.5. Comunicação entre controladores</a></span></li><li><span class="sect1"><a href="#sec_control_val">6.6. Validação</a></span></li><li><span class="sect1"><a href="#sec_control_rpc_call">6.7. Chamada de Serviços RPC</a></span></li><li><span class="sect1"><a href="#sec_control_rest_call">6.8. Chamada de Serviços REST</a></span></li></ul></li><li><span class="chapter"><a href="#chp_model">7. Camada de Modelo</a></span><ul><li><span class="sect1"><a href="#sec_model_rpc">7.1. Servidor acesso via RPC</a></span></li><li><span class="sect1"><a href="#sec_model_rest">7.2. Servidor acesso via REST</a></span></li><li><span class="sect1"><a href="#sec_model_bd">7.3. Banco de Dados</a></span><ul><li><span class="sect2"><a href="#sec_model_bd_on">7.3.1. Banco Online</a></span></li><li><span class="sect2"><a href="#sec_model_bd_off">7.3.2. Banco Offline</a></span></li></ul></li><li><span class="sect1"><a href="#sec_model_setup">7.4. Setup</a></span><ul><li><span class="sect2"><a href="#sec_model_setup_webxml">7.4.1. Arquivo web.xml</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#chp_utils">8. Utils</a></span><ul><li><span class="sect1"><a href="#sec_utils_file">8.1. File Utils</a></span></li><li><span class="sect1"><a href="#sec_utils_html">8.2. HTML Utils</a></span></li><li><span class="sect1"><a href="#sec_utils_stream">8.3. Stream Utils</a></span></li></ul></li><li><span class="chapter"><a href="#chp_tools">9. Ferramentas do Crux</a></span><ul><li><span class="sect1"><a href="#sec_tools_schcema">9.1. Generador de Schema</a></span></li><li><span class="sect1"><a href="#sec_tools_compiler">9.2. Compilador do Crux</a></span></li></ul></li><li><span class="chapter"><a href="#chp_archetypes">10. Archetypes</a></span><ul><li><span class="sect1"><a href="#sec_archetypes_A">10.1. Application A</a></span></li><li><span class="sect1"><a href="#sec_archetypes_B">10.2. Application B</a></span></li></ul></li><li><span class="chapter"><a href="#chp_components">11. Componentes Crux</a></span><ul><li><span class="sect1"><a href="#sec_compon_use">11.1. Como Usar</a></span></li><li><span class="sect1"><a href="#sec_compon_create">11.2. Criação de Componentes</a></span></li></ul></li><li><span class="glossary"><a href="#d5e1125">Glossary</a></span></li><li><span class="appendix"><a href="#apd_lib_comp">A. Biblioteca de Componentes</a></span></li></ul></div><div class="list-of-figures"><div class="toc-title">List of Figures</div><ul><li>1.1. <a href="#imgSampleApp1">Primeira Tela Desktop</a></li><li>1.2. <a href="#imgSampleApp2">Segunda Tela Desktop.</a></li><li>1.3. <a href="#imgSampleApp3">Primeira Tela Mobile</a></li><li>1.4. <a href="#imgSampleApp4">Segunda Tela Mobile</a></li><li>2.1. <a href="#d5e124">Estrutura Projeto Crux</a></li><li>2.2. <a href="#d5e131">Projeto Crux em execução</a></li><li>4.1. <a href="#d5e250"> Controle do lado do Cliente no Crux </a></li><li>4.2. <a href="#d5e256"> Visão geral da arquitetura </a></li></ul></div><div class="list-of-tables"><div class="toc-title">List of Tables</div><ul><li>5.1. <a href="#d5e361">Atributos da Screen</a></li><li>5.2. <a href="#d5e383">Eventos da Screen</a></li><li>5.3. <a href="#d5e456">Atributos da Screen</a></li><li>5.4. <a href="#d5e479">Eventos da Screen</a></li><li>6.1. <a href="#d5e631">Atributos da <span class="italic">@Controller</span></a></li><li>6.2. <a href="#d5e711">Tipos de Escopo suportados pelo container IoC</a></li></ul></div><div class="list-of-examples"><div class="toc-title">List of Examples</div><ul><li>1.1. <a href="#introScreen">index.crux.xml</a></li><li>1.2. <a href="#introView">main.view.xml</a></li><li>1.3. <a href="#introController">MainController.java</a></li><li>3.1. <a href="#instConf-webxml-01">web.xml</a></li><li>3.2. <a href="#instConf-webxml-02">web.xml</a></li><li>3.3. <a href="#instConf-webxml-03">web.xml</a></li><li>3.4. <a href="#instConf-webxml-04">web.xml</a></li><li>3.5. <a href="#instConf-webxml-05">web.xml</a></li><li>3.6. <a href="#instConf-webxml-06">web.xml</a></li><li>3.7. <a href="#instConf-webxml-07">web.xml</a></li><li>3.8. <a href="#instConf-cruxprop">Crux.properties</a></li><li>3.9. <a href="#instConf-cruxconf">CruxModuleConfig.properties</a></li><li>3.10. <a href="#instConf-launcher">app.launcher</a></li><li>3.11. <a href="#instConf-build01">build.xml : CruxCompiler</a></li><li>3.12. <a href="#instConf-build02">build.xml : ServiceMapper </a></li><li>5.1. <a href="#viewNamespace">namespaces</a></li><li>5.2. <a href="#viewScreenHello">index.crux.xml</a></li><li>5.3. <a href="#viewViewHello">mainhello.view.xml</a></li><li>5.4. <a href="#viewControllerHello">HelloController.java : sayHello</a></li><li>5.5. <a href="#viewTemplateUser">userinfo.template.xml</a></li><li>5.6. <a href="#viewScreeHello2">index.crux.xml - versão 2</a></li><li>5.7. <a href="#viewTemplateUser2">userinfo.template.xml - versão 2</a></li><li>5.8. <a href="#viewScreeHello3">index.crux.xml - versão 3</a></li><li>5.9. <a href="#viewtemplateBloco">entrytextbox.template.xml</a></li><li>5.10. <a href="#viewviembloco">textbox.view.xml</a></li><li>5.11. <a href="#viewtemplatelayout">pagelayout.template.xml</a></li><li>5.12. <a href="#viewtemplatelayoutindex">index.crux.xml</a></li><li>6.1. <a href="#simpleController">Definindo uma <code class="code">Controller</code></a></li><li>6.2. <a href="#simpleControllerMethods">Métodos em uma <code class="code">Controller</code></a></li><li>6.3. <a href="#iocControllerSample">Injeção de valores na <code class="code">Controller</code></a></li><li>6.4. <a href="#iocControllerProperties">Propriedades injetadas pelo container IoC</a></li><li>6.5. <a href="#iocControllerScope">Escopo dos objetos junto ao container IoC</a></li><li>6.6. <a href="#iocControllerSubscope">Sub-escopo para objetos junto ao container IoC</a></li><li>6.7. <a href="#iocConfig">Configuração do Container IoC</a></li><li>6.8. <a href="#iocConfigProvider">Definição de um provider para o Container IoC</a></li><li>6.9. <a href="#controllerValidation">ControllerValidation.java</a></li><li>6.10. <a href="#controllerValidationDefault">ControllerValidation.java</a></li><li>6.11. <a href="#serviceInterfaceRPC">GreetingService.java</a></li><li>6.12. <a href="#serviceInterfaceAsyncRPC">GreetingServiceAsync.java</a></li><li>6.13. <a href="#controllerRPC">MyController.java</a></li><li>6.14. <a href="#serviceREST">MyRestService.java</a></li><li>6.15. <a href="#clientProxyREST">MyRestClient.java</a></li><li>6.16. <a href="#clientControllerREST">MyController.java</a></li></ul></div>
	
	



<section class="chapter" id="chp_intro"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Introdução</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="sect1"><a href="#sec_CruxOqueE">1.1. O que é o Crux?</a></span></li><li><span class="sect1"><a href="#sec_CruxArtefatos">1.2. Crux Artefatos e Projetos</a></span></li><li><span class="sect1"><a href="#sec_Exemplo">1.3. Exemplo</a></span></li></ul></div>
	

	<section class="sect1" id="sec_CruxOqueE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.1. O que é o Crux?</h2></div></div></div>	

		<p>O Crux é um framework para desenvolvimento de aplicações web que necessitem de um desempenho superior, 
		altíssima escalabilidade e suporte para múltiplos dispositivos, como desktops, tables, smartphones e TVs. 
		Ele foi projetado para tirar proveito da velocidade e da facilidade do desenvolvimento de aplicações corporativas 
		utilizando HTML 5, sendo um verdadeiro framework para Web 2.0.</p>
		
		<p>Neste manual é descrito como usar o Crux Framework através de exemplos que ilustram os recursos disponíveis no framework. 
		Assim será possível entender os conceitos aplicados no Crux e como explorar o framework da melhor forma.
		O Crux foi construído sobre o <a class="glossterm" href="#GWT"><em class="glossterm">Google Web Toolkit (GWT)</em></a>.
		Consulte a documentação do GWT caso não esteja familiarizado com o seu uso.</p>
		
		<p>Para esta documentação assume-se que os seguintes softwares já estão devidamente 
		instalados e configurados: </p>

		<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
				<p>O Java SE Development Kit (JDK), versão 1.6 ou superior</p>
			</li><li class="listitem">
				<p>O <a class="ulink" href="http://www.eclipse.org/" target="_top">Eclipse</a> IDE</p>
				<p/>
			</li></ul></div>
	
		<p>Para ver a aplicação dos recursos do Crux Framework viste a pagina do 
		   <a class="ulink" href="http://showcase5.cruxframework.org/" target="_top">Showcase 5</a>. </p>

	</section>

	<section class="sect1" id="sec_CruxArtefatos"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.2. Crux Artefatos e Projetos</h2></div></div></div> 
		
		<p>A distribuição do Crux inclui o seguinte conjunto de arquivos jar:</p>
		
		<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
		    <p>crux-runtime.jar - O jar de execução do Crux framework.</p>
		  </li><li class="listitem">
		    <p>crux-dev.jar - Ferramentas do Crux para desenvolvimento.</p>
		  </li><li class="listitem">
		    <p>crux-themes.jar - O padrão de css para todos os componentes do Crux.</p>
		  </li><li class="listitem">
		    <p>crux-gadgets.jar - Suporte a criação de Gadgets com o Crux</p>
		  </li><li class="listitem">
		    <p>crux-widgets.jar - A bibluiteca de widget do Crux. </p>
		  </li></ul></div> 
		
		<p>No site do <a class="ulink" href="http://www.cruxframework.org/" target="_top">Crux Framework</a> 
		são disponibilzados projetos de exemplo para quem deseja começar a desenvolver usando o Crux.</p> 
		
	</section>

	<section class="sect1" id="sec_Exemplo"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.3. Exemplo</h2></div></div></div> 

		<p>O exemplo a seguir ilustra como criar uma pagina HTML simples com o Crux e como interagir usando um Java controller.</p>

		<p>Esta é uma Screen, que será o ponto de entrada da aplicação.</p>

		<div class="example" id="introScreen"><div class="example-title">Example 1.1. index.crux.xml</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#000080">&lt;!DOCTYPE</font></b> <font color="#009900">html</font><b><font color="#000080">&gt;</font></b>
<b><font color="#0000FF">&lt;html</font></b> 
    <font color="#009900">xmlns</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.w3.org/1999/xhtml</font><font color="#FF0000">"</font> 
    <font color="#009900">xmlns</font>:<font color="#009900">core</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux</font><font color="#FF0000">"</font> 
    <font color="#009900">xmlns</font>:<font color="#009900">crux</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/widgets</font><font color="#FF0000">"</font>
    <font color="#009900">xmlns</font>:<font color="#009900">gwt</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/gwt</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
    
    <b><font color="#0000FF">&lt;head&gt;</font></b>
        <b><font color="#0000FF">&lt;title&gt;</font></b>My App<b><font color="#0000FF">&lt;/title&gt;</font></b>
    <b><font color="#0000FF">&lt;/head&gt;</font></b>
    
    <b><font color="#0000FF">&lt;body&gt;</font></b>
        <b><font color="#0000FF">&lt;script</font></b> <font color="#009900">type</font>=<font color="#FF0000">"</font><font color="#FF0000">text/javascript</font><font color="#FF0000">"</font> <font color="#009900">src</font>=<font color="#FF0000">"</font><font color="#FF0000">../myapp/myapp.nocache.js</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b><b><font color="#0000FF">&lt;/script&gt;</font></b>
        
        <b><font color="#0000FF">&lt;core:screen</font></b>
            <font color="#009900">useView</font>=<font color="#FF0000">"</font><font color="#FF0000">*</font><font color="#FF0000">"</font> 
            <font color="#009900">smallViewport</font>=<font color="#FF0000">"</font><font color="#FF0000">user-scalable=no, width=320</font><font color="#FF0000">"</font>
            <font color="#009900">largeViewport</font>=<font color="#FF0000">"</font><font color="#FF0000">user-scalable=no, width=device-width, height=device-height</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
        
        <b><font color="#0000FF">&lt;crux:simpleViewContainer</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">views</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
            <b><font color="#0000FF">&lt;crux:view</font></b> <font color="#009900">name</font>=<font color="#FF0000">"</font><font color="#FF0000">main</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
        <b><font color="#0000FF">&lt;/crux:simpleViewContainer&gt;</font></b>
                
    <b><font color="#0000FF">&lt;/body&gt;</font></b>
<b><font color="#0000FF">&lt;/html&gt;</font></b></tt></pre>
			</pre>
		</div></div><br class="example-break"/>

		<p>Esta é uma View, que nada mais é que uma página Web que foi invocada a partir da Screen acima:</p>

		<div class="example" id="introView"><div class="example-title">Example 1.2. main.view.xml</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;v:view</font></b> 
    <font color="#009900">xmlns</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.w3.org/1999/xhtml</font><font color="#FF0000">"</font> 
    <font color="#009900">xmlns</font>:<font color="#009900">v</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/view</font><font color="#FF0000">"</font> 
    <font color="#009900">xmlns</font>:<font color="#009900">core</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux</font><font color="#FF0000">"</font> 
    <font color="#009900">xmlns</font>:<font color="#009900">crux</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/widgets</font><font color="#FF0000">"</font>
    <font color="#009900">xmlns</font>:<font color="#009900">gwt</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/gwt</font><font color="#FF0000">"</font>
    <font color="#009900">useResource</font>=<font color="#FF0000">"</font><font color="#FF0000">xStandardResources</font><font color="#FF0000">"</font>
    <font color="#009900">useController</font>=<font color="#FF0000">"</font><font color="#FF0000">mainController</font><font color="#FF0000">"</font>
    <font color="#009900">onLoad</font>=<font color="#FF0000">"</font><font color="#FF0000">mainController.onLoad</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
    
    <b><font color="#0000FF">&lt;crux:storyboard</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">mainPanel</font><font color="#FF0000">"</font> <font color="#009900">style</font>=<font color="#FF0000">"</font><font color="#FF0000">display:block; margin: 50px</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
         <b><font color="#0000FF">&lt;gwt:textBox</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">nameTextBox</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
         <b><font color="#0000FF">&lt;crux:button</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">okButton</font><font color="#FF0000">"</font> <font color="#009900">text</font>=<font color="#FF0000">"</font><font color="#FF0000">Go!</font><font color="#FF0000">"</font> <font color="#009900">onSelect</font>=<font color="#FF0000">"</font><font color="#FF0000">mainController.sayOk</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;/crux:storyboard&gt;</font></b>
    
<b><font color="#0000FF">&lt;/v:view&gt;</font></b></tt></pre>
			</pre>
		</div></div><br class="example-break"/>	

		<p>Este é o Controller, presente no lado do Cliente:</p>

		<div class="example" id="introController"><div class="example-title">Example 1.3. MainController.java</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>@<b><font color="#000000">Controller</font></b><font color="#990000">(</font><font color="#FF0000">"mainController"</font><font color="#990000">)</font>
<b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> MainController 
<font color="#FF0000">{</font>
    @Inject
    <b><font color="#0000FF">public</font></b> MainView screen<font color="#990000">;</font>
    
    @Inject
    <b><font color="#0000FF">public</font></b> MainMessages messages<font color="#990000">;</font>

    @Expose
    <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">onLoad</font></b><font color="#990000">(</font><font color="#990000">)</font>
    <font color="#FF0000">{</font>
        <i><font color="#9A1900">//</font></i><i><font color="#9A1900">do something</font></i>
    <font color="#FF0000">}</font>
    
    @Expose
    <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">sayOk</font></b><font color="#990000">(</font><font color="#990000">)</font>
    <font color="#FF0000">{</font>
        MessageDialog<font color="#990000">.</font><b><font color="#000000">show</font></b><font color="#990000">(</font><b><font color="#0000FF">null</font></b><font color="#990000">,</font> messages<font color="#990000">.</font><b><font color="#000000">alertMessage</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">,</font> <b><font color="#0000FF">null</font></b><font color="#990000">)</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>
    
    @<b><font color="#000000">BindView</font></b><font color="#990000">(</font><font color="#FF0000">"main"</font><font color="#990000">)</font>
    <b><font color="#0000FF">public</font></b> <b><font color="#0000FF">static</font></b> <b><font color="#0000FF">interface</font></b> MainView <b><font color="#0000FF">extends</font></b> WidgetAccessor
    <font color="#FF0000">{</font>
        TextBox <b><font color="#000000">nameTextBox</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>
    
    @<b><font color="#000000">MessageName</font></b><font color="#990000">(</font><font color="#FF0000">"mainMessages"</font><font color="#990000">)</font>
    <b><font color="#0000FF">public</font></b> <b><font color="#0000FF">static</font></b> <b><font color="#0000FF">interface</font></b> MainMessages <b><font color="#0000FF">extends</font></b> Messages
    <font color="#FF0000">{</font>
        @<b><font color="#000000">DefaultMessage</font></b><font color="#990000">(</font><font color="#FF0000">"This is a alert!"</font><font color="#990000">)</font>
        String <b><font color="#000000">alertMessage</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>
<font color="#FF0000">}</font>
</tt></pre>
			</pre>
		</div></div><br class="example-break"/>

		<p>A seguir são apresentadas as imagens das telas do exemplo em execução em um desktop ou notebook.</p>

		<div class="figure" id="imgSampleApp1"><div class="figure-title">Figure 1.1. Primeira Tela Desktop</div><div class="figure-contents">
			
			<div class="mediaobject"><img src="images/imgSampleApp1.png" alt="Primeira Tela Desktop"/><div class="caption">
					<p>Tela da aplicação executada em um Desktop. </p>
				</div></div>
		</div></div><br class="figure-break"/>

		<div class="figure" id="imgSampleApp2"><div class="figure-title">Figure 1.2. Segunda Tela Desktop.</div><div class="figure-contents">
            
            <div class="mediaobject"><img src="images/imgSampleApp2.png" alt="Segunda Tela Desktop."/><div class="caption">
					<p>Tela da aplicação executada em um Desktop quando alerta é acionado. </p>
				</div></div>
        </div></div><br class="figure-break"/>

		<p>A seguir são apresentadas as imagens das telas do mesmo exemplo em execução em smartphone.</p>

        <div class="figure" id="imgSampleApp3"><div class="figure-title">Figure 1.3. Primeira Tela Mobile</div><div class="figure-contents">
            
            <div class="mediaobject"><img src="images/imgSampleApp3.png" alt="Primeira Tela Mobile"/><div class="caption">
					<p>Tela da aplicação executada em um dispositivo mobile (Android). </p>
				</div></div>
        </div></div><br class="figure-break"/>

        <div class="figure" id="imgSampleApp4"><div class="figure-title">Figure 1.4. Segunda Tela Mobile</div><div class="figure-contents">
            
            <div class="mediaobject"><img src="images/imgSampleApp4.png" alt="Segunda Tela Mobile"/><div class="caption">
					<p>Tela da aplicação executada em um dispositivo mobile (Android) quando alerta é acionado </p>
				</div></div>
        </div></div><br class="figure-break"/>

		<p>Note que podemos customizar o estilo CSS e o posicionamento das widgets na tela, 
		dependendo do dispositivo onde a aplicação será executada.</p>

	</section>

</section> 


<section class="chapter" id="chp_quickstart"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Quick Start</h1></div></div></div>
	

	<p>
		Aprenda a criar um projeto Crux em 5 minutos. Com o Maven é possível
		criar projetos Crux de forma rápida. Neste exemplo vamos mostrar como criar um
		projeto	<span class="italic">Hello World</span>
		usando o Maven integrado ao	ambiente Eclipse (plugin M2E).
	</p>

	<p> Para instalar o Crux, siga os seguintes passos no Eclipse:
	</p>

	<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
			<p>
				No menu do Eclipse, localize e selecione a opção
				<span class="guimenu">File</span> → <span class="guisubmenu">New</span> → <span class="guisubmenu">Project</span>
			</p>
		</li><li class="listitem">
			<p>Selecione a opção Maven Project e na janela de diálogo que se
				abrirá, clique no botão Next.</p>
		</li><li class="listitem">
			<p>Na campo Catalog, selecione All Catalogs.</p>
		</li><li class="listitem">
			<p>No capo Filter, digite crux.</p>
		</li><li class="listitem">
			<p>Selecione a opção crux-module-app.</p>
		</li><li class="listitem">
			<p>No próximo diálogo, informe um Group Id, por exemplo,
				meus.testes.crux .</p>
		</li><li class="listitem">
			<p>Informe um Artifact Id, por exemplo, HelloCrux.</p>
		</li><li class="listitem">
			<p>Informe um Package, por exemplo, meus.testes.crux.</p>
		</li><li class="listitem">
			<p>Altere as propriedades do archetype. Informe HelloCrux em
				module-name e hellocrux em module-short-name.</p>
		</li><li class="listitem">
			<p>Pressione o botão Finish e pronto! Um projeto Crux será criado
				e estará pronto para você começar a explorar. Na imagem abaixo
				podemos ver a estrutura do projeto criado:</p>
			<div class="figure" id="d5e124"><div class="figure-title">Figure 2.1. Estrutura Projeto Crux</div><div class="figure-contents">
				
				<div><img src="images/project-structure.jpg" alt="Estrutura Projeto Crux"/></div>
			</div></div><br class="figure-break"/>
		</li><li class="listitem">
			<p>Localize o arquivo HelloCrux.launch, na pasta raiz do projeto.
				Clique nele com o botão direito do mouse, selecione Run As e, em
				seguida, HelloCrux.</p>
		</li><li class="listitem">
			<p>O console de depuração do GWT (DevMode) se abrirá. Quando
				habilitado, clique no botão Launch Default Browser. Sua aplicação
				será aberta em uma janela do navegador e se parecerá com essa:
			</p>
			<div class="figure" id="d5e131"><div class="figure-title">Figure 2.2. Projeto Crux em execução</div><div class="figure-contents">
				
				<div><img src="images/project-running.jpg" alt="Projeto Crux em execução"/></div>
			</div></div><br class="figure-break"/>
		</li><li class="listitem">
			<p>Parabéns, você criou seu primeiro projeto em Crux!</p>
		</li></ol></div>

</section>


<section class="chapter" id="chp_inst_conf"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Instalação e Configuração</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="sect1"><a href="#sec_inst_maven">3.1. Via Maven Archetype</a></span></li><li><span class="sect1"><a href="#sec_inst_manual">3.2. Manualmente</a></span></li></ul></div>
	

	<p>Neste capítulo é apresentado como instalar e configurar o Crux
		através de archetypes do Maven e manualmente em qualquer outro tipo de
		projeto no Eclipse ou outra IDE.
	</p>

	<section class="sect1" id="sec_inst_maven"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.1. Via Maven Archetype</h2></div></div></div>
		
		<p>
			O Crux pode ser instalado utilizando os Archetypes do Maven. Os
			archetypes são estruturas de projetos pré-configuradas, que aceitam
			customizações via parâmetros e têm a responsabilidade de montar um
			projeto completo, pronto para o uso.
		</p>

		<p>
			Estes archetypes estão contidos em um catálogo que está
			disponível no Maven Central. Para maiores informações a respeito da criação de um projeto utilizando os archetypes Maven, consulte a seção
           <span class="quote">“<span class="quote">
               <a class="link" href="#chp_quickstart" title="Chapter 2. Quick Start">Quick Start</a>
           </span>”</span>. 
	    </p>
	    <p>
			Dentre os artefatos deste catálogo, são destacados:
		</p>

		<p>
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
					<p>crux-module-app - Esta é uma aplicação monolítica. É
						distribuída no formato de JAR.
					</p>
				</li><li class="listitem">
					<p>crux-module-container-app - Esta é uma aplicação container
						de vários módulos. É distribuída no formato WAR.
					</p>
				</li></ul></div><p>
		</p>

	</section>

	<section class="sect1" id="sec_inst_manual"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.2. Manualmente</h2></div></div></div>
		

		<p> Há também como instalar o Crux no seu projeto sem utilizar os
			archetypes do Maven.
			Geralmente, você precisará destes passos caso
			opte por não trabalhar com o Maven
			ou já tenha um projeto legado onde
			queira instalar o Crux.
		</p>

		<p> Para isso, siga os seguintes passos:</p>
		<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
				<p>
					Adicionar os JARs do Crux no buildpath do seu projeto. 
					Eles podem ser obtidos no site do Crux, na seção de Downloads. Vide
					seção <a class="link" href="#sec_CruxArtefatos" title="1.2. Crux Artefatos e Projetos">Crux Artefatos e Projetos</a>
				</p>
				<p>
					Os JARs <span class="italic">crux-dev.jar</span> e 
					<span class="italic">gwt-dev.jar</span> devem ser utilizados
					apenas em tempo de compilação, então devem estar localizados em
					uma	pasta build/lib	que deve estar no classpath da aplicação.
				</p>
				<p>
					Os jars <span class="italic">crux-runtime.jar</span>, 
					<span class="italic">gwt-runtime.jar</span> e 
					<span class="italic">gwt-servlet.jar</span>,
					devem ser utilizados em tempo de execução, então devem estar
					presentes na pasta WEB-INF/lib do war da aplicação.
				</p>
			</li><li class="listitem">
				<p>Adicionar as seguintes entradas no <span class="italic">web.xml</span>.</p>

				<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
						<p>O projeto deve ser codificado em UTF-8, o que também segue a
							recomendação do GWT de sempre trabalhar com arquivos .properties
							nesta codificação.
						</p>
						
						<div class="example" id="instConf-webxml-01"><div class="example-title">Example 3.1. web.xml</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;context-param&gt;</font></b>
	<b><font color="#0000FF">&lt;param-name&gt;</font></b>outputCharset<b><font color="#0000FF">&lt;/param-name&gt;</font></b>
	<b><font color="#0000FF">&lt;param-value&gt;</font></b>UTF-8<b><font color="#0000FF">&lt;/param-value&gt;</font></b>
<b><font color="#0000FF">&lt;/context-param&gt;</font></b></tt></pre>
							</pre>
						</div></div><br class="example-break"/>	
					</li><li class="listitem">
						<p>Adicionar o listener <code class="code">InitializerListener</code>, que será
							responsável por escanear as classes da aplicação e montar um mapa
							que será utilizado posteriormente durante o processamento do Crux. 
							É importante mencionar que em ambiente de produção este processamento
							não será realizado, uma	vez que as classes já se encontram
							compiladas.
						</p>
		
						<div class="example" id="instConf-webxml-02"><div class="example-title">Example 3.2. web.xml</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;listener&gt;</font></b>
	<b><font color="#0000FF">&lt;listener-class&gt;</font></b>org.cruxframework.crux.core.server.InitializerListener
	<b><font color="#0000FF">&lt;/listener-class&gt;</font></b>
<b><font color="#0000FF">&lt;/listener&gt;</font></b>
</tt></pre>
							</pre>
						</div></div><br class="example-break"/>	
					</li><li class="listitem">
						<p>Caso haja chamadas RPC na aplicação, deve ser adicionado o
							servlet do Crux <code class="code">RemoteServiceServlet</code>, que é
							uma especialização do Servlet de mesmo nome do GWT, adicionando novas
							funcionalidades como tokens de sincronização,
							pré-processadores, etc.
						</p>
		
						<div class="example" id="instConf-webxml-03"><div class="example-title">Example 3.3. web.xml</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;servlet&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-name&gt;</font></b>remoteServiceServlet<b><font color="#0000FF">&lt;/servlet-name&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-class&gt;</font></b>org.cruxframework.crux.core.server.dispatch.RemoteServiceServlet
	<b><font color="#0000FF">&lt;/servlet-class&gt;</font></b>
<b><font color="#0000FF">&lt;/servlet&gt;</font></b>

<b><font color="#0000FF">&lt;servlet-mapping&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-name&gt;</font></b>remoteServiceServlet<b><font color="#0000FF">&lt;/servlet-name&gt;</font></b>
	<b><font color="#0000FF">&lt;url-pattern&gt;</font></b>*.rpc<b><font color="#0000FF">&lt;/url-pattern&gt;</font></b>
<b><font color="#0000FF">&lt;/servlet-mapping&gt;</font></b></tt></pre>
							</pre>
						</div></div><br class="example-break"/>
					</li><li class="listitem">
						<p>Caso haja chamadas REST na aplicação, deve ser adicionado o
							servlet do Crux RestServlet, que é responsável por processar as
							requisições REST vindas do servidor. Este servlet tratará de diversas
							funcionalidades de segurança, deserialização dos objetos e a eventual
							chamada do método correspondente na classe de serviço.
						</p>
		
						<div class="example" id="instConf-webxml-04"><div class="example-title">Example 3.4. web.xml</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;servlet&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-name&gt;</font></b>restServiceServlet<b><font color="#0000FF">&lt;/servlet-name&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-class&gt;</font></b>org.cruxframework.crux.core.server.rest.servlet.RestServlet
	<b><font color="#0000FF">&lt;/servlet-class&gt;</font></b>
	<b><font color="#0000FF">&lt;init-param&gt;</font></b>
		<b><font color="#0000FF">&lt;param-name&gt;</font></b>preprocessors<b><font color="#0000FF">&lt;/param-name&gt;</font></b>
		<b><font color="#0000FF">&lt;param-value&gt;</font></b>br.com.mca.comissionamento.core.server.infrastructure.SecurityPreprocessor
		<b><font color="#0000FF">&lt;/param-value&gt;</font></b>
	<b><font color="#0000FF">&lt;/init-param&gt;</font></b>
<b><font color="#0000FF">&lt;/servlet&gt;</font></b>

<b><font color="#0000FF">&lt;servlet-mapping&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-name&gt;</font></b>restServiceServlet<b><font color="#0000FF">&lt;/servlet-name&gt;</font></b>
	<b><font color="#0000FF">&lt;url-pattern&gt;</font></b>/rest/*<b><font color="#0000FF">&lt;/url-pattern&gt;</font></b>
<b><font color="#0000FF">&lt;/servlet-mapping&gt;</font></b></tt></pre>
							</pre>
						</div></div><br class="example-break"/>
					</li><li class="listitem">
						<p>Esta é uma configuração opcional e expôe um servlet para
							testes de views, onde o desenvolvedor pode informar apenas o nome do
							módulo e o nome da view na url e o Crux a carregará e devolverá a view
							desejada para o cliente.
						</p>
		
						<div class="example" id="instConf-webxml-05"><div class="example-title">Example 3.5. web.xml</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;servlet&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-name&gt;</font></b>testViewServlet<b><font color="#0000FF">&lt;/servlet-name&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-class&gt;</font></b>org.cruxframework.crux.module.development.ModulesViewTester
	<b><font color="#0000FF">&lt;/servlet-class&gt;</font></b>
<b><font color="#0000FF">&lt;/servlet&gt;</font></b>
<b><font color="#0000FF">&lt;servlet-mapping&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-name&gt;</font></b>testViewServlet<b><font color="#0000FF">&lt;/servlet-name&gt;</font></b>
	<b><font color="#0000FF">&lt;url-pattern&gt;</font></b>/viewTester/*<b><font color="#0000FF">&lt;/url-pattern&gt;</font></b>
<b><font color="#0000FF">&lt;/servlet-mapping&gt;</font></b></tt></pre>
							</pre>
						</div></div><br class="example-break"/>
					</li><li class="listitem">
						
						<p>Esta é uma configuração apenas para o ambiente de
							desenvolvimento e expôe um servlet para
							cadastrar a configuração de
							widgets para o DevMode.
						</p>
		
						<div class="example" id="instConf-webxml-06"><div class="example-title">Example 3.6. web.xml</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;listener&gt;</font></b>
	<b><font color="#0000FF">&lt;listener-class&gt;</font></b>org.cruxframework.crux.core.server.DevModeInitializerListener
	<b><font color="#0000FF">&lt;/listener-class&gt;</font></b>
<b><font color="#0000FF">&lt;/listener&gt;</font></b></tt></pre>
							</pre>
						</div></div><br class="example-break"/>
					</li><li class="listitem">
						<p>Esta é uma configuração apenas para o ambiente de
							desenvolvimento e expõe um filtro
							utilizado para localizar recursos
							dentro da estrutura de módulos.
						</p>
		
						<div class="example" id="instConf-webxml-07"><div class="example-title">Example 3.7. web.xml</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;filter&gt;</font></b>
	<b><font color="#0000FF">&lt;display-name&gt;</font></b>ModulesDeclarativeUIFilter<b><font color="#0000FF">&lt;/display-name&gt;</font></b>
	<b><font color="#0000FF">&lt;filter-name&gt;</font></b>ModulesDeclarativeUIFilter<b><font color="#0000FF">&lt;/filter-name&gt;</font></b>
	<b><font color="#0000FF">&lt;filter-class&gt;</font></b>org.cruxframework.crux.module.filter.ModulesDeclarativeUIFilter
	<b><font color="#0000FF">&lt;/filter-class&gt;</font></b>
<b><font color="#0000FF">&lt;/filter&gt;</font></b>

<b><font color="#0000FF">&lt;filter-mapping&gt;</font></b>
	<b><font color="#0000FF">&lt;filter-name&gt;</font></b>ModulesDeclarativeUIFilter<b><font color="#0000FF">&lt;/filter-name&gt;</font></b>
	<b><font color="#0000FF">&lt;url-pattern&gt;</font></b>*.html<b><font color="#0000FF">&lt;/url-pattern&gt;</font></b>
<b><font color="#0000FF">&lt;/filter-mapping&gt;</font></b>
</tt></pre>
							</pre>
						</div></div><br class="example-break"/>
					</li></ul></div>
				
			</li><li class="listitem">
				<p>Devem ser adicionados dois arquivos na pasta de source da	aplicação.
				</p>
				
				<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
						<p>
							<span class="bold"><strong>Crux.properties</strong></span>: reponsável por definir as configurações utilizadas
							pelo Crux. Exemplo:
						</p>
							
						<div class="example" id="instConf-cruxprop"><div class="example-title">Example 3.8. Crux.properties</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>#Parâmetro obrigatório: define qual será a classe responsável por processar as dependências do classpath.
classPathResolver=org.cruxframework.crux.module.classpath.ModuleClassPathResolver

#Parâmetro opcional: ???
enableWebRootScannerCache=false

#Indica que a estratégia de busca dos recursos deve se basear em um ambiente de cluster.
restServiceResourceStateHandler=org.cruxframework.crux.core.server.rest.state.ClusteredResourceStateHandler
</tt></pre>
							</pre>
						</div></div><br class="example-break"/>
					</li><li class="listitem">	
				
						<p>
							<span class="bold"><strong>CruxModuleConfig.properties</strong></span>: é utilizado somente durante o
							desenvolvimento. Nele é definido quais módulos serão
							utilizados durante a execução e	compilação da aplicação. Exemplo:
						</p>
							
						<div class="example" id="instConf-cruxconf"><div class="example-title">Example 3.9. CruxModuleConfig.properties</div><div class="example-contents">
						    
						    <pre class="programlisting">
developmentModules=moduleA,moduleB,moduleC
							</pre>
						</div></div><br class="example-break"/>
					</li></ul></div>
								
			</li><li class="listitem">
				<p>Deve ser adicionado um launcher para iniciar a aplicação.
					Este arquivo conterá as configurações para executar a aplicação
					através do DevMode. Exemplo:
				</p>
				
				<div class="example" id="instConf-launcher"><div class="example-title">Example 3.10. app.launcher</div><div class="example-contents">
				        
					<pre class="programlisting">
			 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#000080">&lt;?xml</font></b> <font color="#009900">version</font>=<font color="#FF0000">"</font><font color="#FF0000">1.0</font><font color="#FF0000">"</font> <font color="#009900">encoding</font>=<font color="#FF0000">"</font><font color="#FF0000">UTF-8</font><font color="#FF0000">"</font> <font color="#009900">standalone</font>=<font color="#FF0000">"</font><font color="#FF0000">no</font><font color="#FF0000">"</font><b><font color="#000080">?&gt;</font></b>
<b><font color="#0000FF">&lt;launchConfiguration</font></b> <font color="#009900">type</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.localJavaApplication</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
    <b><font color="#0000FF">&lt;listAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.debug.core.MAPPED_RESOURCE_PATHS</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
        <b><font color="#0000FF">&lt;listEntry</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">/&lt;&lt;APPLICATION_NAME&gt;&gt;</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;/listAttribute&gt;</font></b>
    <b><font color="#0000FF">&lt;listAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.debug.core.MAPPED_RESOURCE_TYPES</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
        <b><font color="#0000FF">&lt;listEntry</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">4</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;/listAttribute&gt;</font></b>
    <b><font color="#0000FF">&lt;booleanAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.debug.core.appendEnvironmentVariables</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">true</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;booleanAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.debug.ui.CONSIDER_INHERITED_MAIN</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">true</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;booleanAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.debug.ui.INCLUDE_EXTERNAL_JARS</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">true</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;booleanAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.ATTR_USE_START_ON_FIRST_THREAD</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">true</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;listAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.CLASSPATH</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
        ...
    <b><font color="#0000FF">&lt;/listAttribute&gt;</font></b>
    <b><font color="#0000FF">&lt;booleanAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.DEFAULT_CLASSPATH</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">false</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;stringAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.MAIN_TYPE</font><font color="#FF0000">"</font> 
                     <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">org.cruxframework.crux.module.launch.ModulesLauncher</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;stringAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.PROGRAM_ARGUMENTS</font><font color="#FF0000">"</font>
       <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-startupUrl &lt;&lt;APPLICATION_MODULE_NAME&gt;&gt;/index.html -war target/&lt;&lt;APPLICATION_NAME&gt;&gt; -gen generated -bindAddress 0.0.0.0 -logLevel INFO</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;stringAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.PROJECT_ATTR</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">MyApp</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;stringAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.SOURCE_PATH_PROVIDER</font><font color="#FF0000">"</font> 
                     <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.m2e.launchconfig.sourcepathProvider</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;stringAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.VM_ARGUMENTS</font><font color="#FF0000">"</font> 
       <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-Xss10768k -Xms800M -Xmx800M -Xdebug -DCrux.dev=true -Djava.naming.factory.initial=org.mortbay.naming.InitialContextFactory -DdebugEnabled=true</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
<b><font color="#0000FF">&lt;/launchConfiguration&gt;</font></b>
</tt></pre>
					</pre>
				</div></div><br class="example-break"/>
				
				<p>No exemplo o padrão <code class="code"> &lt;&lt;APPLICATION_NAME&gt;&gt;</code> 
				deve ser substituído pelo nome da aplicação.</p>
			</li><li class="listitem">
                <p>Para gerar o WAR da aplicação, os seguintes métodos estão disponíveis:
                </p>
                
                <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
					
		                <p>
		                    <span class="bold"><strong>CruxCompiler</strong></span>: Este é o compilador do Crux. 
		                    Ele pode ser chamado via linha de comando, scripts MAVEN, ANT, etc.
		                    Abaixo segue um exemplo de um script ANT:
		                </p>
		                
		                <div class="example" id="instConf-build01"><div class="example-title">Example 3.11. build.xml : CruxCompiler</div><div class="example-contents">
						        
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;cruxmodulecompiler</font></b> <font color="#009900">srcDir</font>=<font color="#FF0000">"</font><font color="#FF0000">...</font><font color="#FF0000">"</font> <font color="#009900">outputDir</font>=<font color="#FF0000">"</font><font color="#FF0000">...</font><font color="#FF0000">"</font> <font color="#009900">webDir</font>=<font color="#FF0000">"</font><font color="#FF0000">...</font><font color="#FF0000">"</font> 
                    <font color="#009900">keepPagesGeneratedFiles</font>=<font color="#FF0000">"</font><font color="#FF0000">true</font><font color="#FF0000">"</font> <font color="#009900">inputCharset</font>=<font color="#FF0000">"</font><font color="#FF0000">UTF-8</font><font color="#FF0000">"</font> <font color="#009900">outputCharset</font>=<font color="#FF0000">"</font><font color="#FF0000">UTF-8</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>

	<i><font color="#9A1900">&lt;!--</font></i><i><font color="#9A1900"> VM parameters. For intancem if you need to modify memory settings </font></i><i><font color="#9A1900">--&gt;</font></i>
	<b><font color="#0000FF">&lt;jvmarg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-Xmx2560M</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;jvmarg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-Xms512M</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;jvmarg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-XX:MaxPermSize=256m</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;jvmarg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-XX:+UseParNewGC</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;jvmarg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-XX:+UseConcMarkSweepGC</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;jvmarg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-XX:+UseGCOverheadLimit</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	
	<i><font color="#9A1900">&lt;!--</font></i><i><font color="#9A1900"> GWT and CRUX parameters </font></i><i><font color="#9A1900">--&gt;</font></i>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-gen</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">/temp/crux/gen</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-style</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">DETAILED</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-logLevel</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">DEBUG</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-localWorkers</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">8</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-draftCompile</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
<b><font color="#0000FF">&lt;/cruxmodulecompiler&gt;</font></b></tt></pre>
							</pre>
						</div></div><br class="example-break"/>
		                
                	</li><li class="listitem">
						<p>
						    <span class="bold"><strong>ServiceMapper</strong></span>: Este é uma ferramenta para criar um mapa das 
						    interfaces remotas de serviço (RPC ou REST). Estes mapas serão armazenados 
						    em arquivos "crux-rest" e "crux-remote" e são necessários durante a execução do código 
						    compilado. Abaixo segue um exemplo de um script ANT:
						</p>

						<div class="example" id="instConf-build02"><div class="example-title">Example 3.12. build.xml : ServiceMapper </div><div class="example-contents">
						        
							<pre class="programlisting">
									<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;serviceMapper</font></b> <font color="#009900">projectDir</font>=<font color="#FF0000">"</font><font color="#FF0000">...</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
	<b><font color="#0000FF">&lt;classpath&gt;</font></b>
		<b><font color="#0000FF">&lt;path</font></b> <font color="#009900">refid</font>=<font color="#FF0000">"</font><font color="#FF0000">build.classpath</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
		<b><font color="#0000FF">&lt;pathelement</font></b> <font color="#009900">path</font>=<font color="#FF0000">"</font><font color="#FF0000">...</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;/classpath&gt;</font></b>
<b><font color="#0000FF">&lt;/serviceMapper&gt;</font></b></tt></pre>
							</pre>
						</div></div><br class="example-break"/>
						          
					</li></ul></div>  

            </li></ol></div>

	</section>

</section> 


<section class="chapter" id="chp_architecture"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Visão Arquitetura</h1></div></div></div>
	

	<p>Neste capítulo é dada um visão geral da arquitetura do Crux
		Framework. O Crux possui uma implementação de MVC (Model, View e Controller)
		inteligente e de fácil utilização.
	</p>

	<p>
		A camada View é	implementada através dos
		conceitos de Screen, Templates e Views, que são
		detalhados no capítulo seguinte. 
		A implementação da camada Controller está alocada no cliente. 
		Está estratégia garante	um desempenho consideravelmente
		superior às	arquiteturas onde o	Controller está no
		servidor, uma vez que dados de controle da página
		não	precisam trafegar pela rede para serem processados.
		O trafego de dados pela rede somente é usado quando é
		efetivamente necessário, que é para a acesso a camada de
		Model.
	</p>
	
	<p>
		A figura a seguir ilustra a disposição de
		cada camada no modelo cliente-servidor adotado pelo Crux em 
		comparação ao adotado por outros frameworks com o 
		controller no servidor.
	</p>

	<div class="figure" id="d5e250"><div class="figure-title">Figure 4.1.  Controle do lado do Cliente no Crux </div><div class="figure-contents">
		
		<div><img src="images/controller-client-side.gif" alt="Controle do lado do Cliente no Crux"/></div>
	</div></div><br class="figure-break"/>
	
	<p>
		A camada de modelo é responsável pelas regras
		de negócio e pelo controle de acesso aos dados. 
		Geralmente a camada de modelo é alocada no servidor
		para consolidar a arquitetura cliente-servidor e
		para garantir a	segurança dos dados, uma vez
		que este código de não fica	visível para o	cliente.
	</p>	
		
	<p>	
		Uma exceção a esta regra é quando é alocada uma
		classe Model no cliente. Existem aplicações 
		que tem esssa necessidade, para que seja possível
		o trabalho offline. Será falado em mais detalhes sobre
		essa possibilidade.
	</p>

	<p>	
		A figura a seguir apresenta a arquitetura do Crux, com suas camadas 
		e com seus principais componentes e modo de interação.
	</p>
	
	<div class="figure" id="d5e256"><div class="figure-title">Figure 4.2.  Visão geral da arquitetura </div><div class="figure-contents">
		
		<div><img src="images/arquitetura1.png" alt="Visão geral da arquitetura"/></div>
	</div></div><br class="figure-break"/>

	<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
			<p>
				A <span class="italic">screen</span> é uma página que contém um ou
				mais containers de <span class="italic">views</span>.
				Cada container gerencia as suas <span class="italic">views</span> que, por
				sua vez, representam uma tela da aplicação, por exemplo, a busca de um usuário, o cadastro
				de um fornecedor ou a remoção de um produto.
			</p>
			<p>	
				A <span class="italic">screen</span> e as <span class="italic">views</span> 
				são arquivos XHTML que aceitam tags de diversas
				bibliotecas declaradas em seus cabeçalhos, dentre elas, tags
				do GWT,	Crux ou mesmo templates personalizados.
			</p>
			<p>	
				Quando é editado o código destes arquivos, é dito que se 
				trabalha de forma declarativa, uma vez que é declarada a
				estrutura da página	diretamente em um arquivo XHTML.
			</p>
		</li><li class="listitem">
			<p>
				Os <span class="italic">controllers</span> são classes escritas em
				Java que realizam a gestão dos componentes
				da tela. Desde pequenas validações (independentes de regras de
				negócio) e as chamadas	de funções do lado do servidor. 
				Quando a aplicação é compilada as classes Java são convertidas para
				<span class="italic">javascript</span> para serem executadas no cliente.
			</p>
			<p>	
				A relação entre as <span class="italic">views</span> e
				as <span class="italic">controllers</span>
				é de NxN, ou seja, uma <span class="italic">views</span> pode
				possuir vários <span class="italic">controllers</span> e, 
				dado um <span class="italic">controller</span>, este pode estar
				associado a várias	<span class="italic">views</span>. 
				A comunicação entre o cliente e servidor parte
				da <span class="italic">controller</span> em direção à Model, 
				e pode ser feita através de RPC ou REST.
			</p>
		</li><li class="listitem">
			<p>
				Os <span class="italic">services</span> são classes Java responsáveis pela 
				lógica de negócio da aplicação. 
				A partir daí, o arquiteto pode escolher a melhor tecnologia que se enquadra
				em seu contexto. Por exemplo, pode-se utilizar as classes  <span class="italic">services</span> 
				como dispatchers para EJBs, que	processarão a lógica de negócio da aplicação. 
				Ou mesmo, caso uma
				arquitetura mais simples seja desejada, as próprias classes  <span class="italic">services</span> 
				podem processar as regras de negócio, já que elas são instanciadas e
				chamadas através de servlets gerenciados pelo Crux.
			</p>
		</li></ol></div>


</section>


<section class="chapter" id="chp_view"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Camada de Visão</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="sect1"><a href="#sec_view_concepts">5.1.  Conceitos Principais</a></span></li><li><span class="sect1"><a href="#sec_view_screen">5.2. Screen</a></span><ul><li><span class="sect2"><a href="#sec_view_screen_atrib">5.2.1. Atributos da Screen</a></span></li><li><span class="sect2"><a href="#sec_view_screen_event">5.2.2. Eventos da Screen</a></span></li></ul></li><li><span class="sect1"><a href="#sec_view_view">5.3. View</a></span><ul><li><span class="sect2"><a href="#sec_view_view_atrib">5.3.1. Atributos da View</a></span></li><li><span class="sect2"><a href="#sec_view_view_event">5.3.2. Eventos da View</a></span></li></ul></li><li><span class="sect1"><a href="#sec_view_template">5.4. Template</a></span><ul><li><span class="sect2"><a href="#sec_view_template_parameter">5.4.1. Parametrizando Templates</a></span></li><li><span class="sect2"><a href="#sec_view_template_component">5.4.2. Templates de Blocos</a></span></li><li><span class="sect2"><a href="#sec_view_template_layout">5.4.3. Templates de Layouts</a></span></li></ul></li><li><span class="sect1"><a href="#sec_view_events_call">5.5. Chamada de Eventos</a></span></li></ul></div>
	

	<p>Neste capítulo é apresentado em detalhes a camada de visão do Crux Framework.
	A camada de visão no Crux é codificada de forma declarativa atraves de arquivos XML,
	assim, as telas do sistema são projetadas e escritas em arquivos XHTML.
	O Crux a partir de versão 5 permite o desenvolvimento de sistemas baseados 
	em <span class="italic">views</span>, e não mais só em <span class="italic">screens</span>.</p>
	
	<section class="sect1" id="sec_view_concepts"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.1.  Conceitos Principais</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>
	        <p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  Os tipos de arquivo de visão e pra que servem cada um deles.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Os arquivos ".crux.xml." - Descreve-los como arquivos XHTML que estão associados à Screen. 
			          Eles se ligam ao document principal da página e criam a rootView, que é uma view especial, 
			          associada ao body da pagina e que não é descarregada enquanto a aplicação (página) estiver aberta.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Os containers de view e sobre as views. Os arquivos ".view.xml"</p>
			  </li><li class="listitem">
			    <p>ToDo :  Descrição da função de um templates. Os arquivos ".template.xml".</p>
			  </li><li class="listitem">
			    <p>ToDo :  Os widgets e biliotecas de componentes no Crux. Como elas são importadas na 
			      tela atraves de namespaces.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Os arquivos XSDs no Crux, sobre o gerador de schemas da possibilidade de 
			        se adicionar novas bibliotecas personalizadas.</p>
			  </li></ul></div> 
		</div>		
		
		

		<p>No crux existem três tipos de arquivos da camada de visão, onde cada um é usado em um contexto e com uma função. São eles:</p>
		<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
				<p><span class="bold"><strong>Screen</strong></span> : é definida no arquivo <span class="emphasis"><em>.crux.xml</em></span> que é um arquivo XHTML. </p>
			</li><li class="listitem">
				<p><span class="bold"><strong>View</strong></span> : é definida no arquivo <span class="emphasis"><em>.view.xml</em></span> que é um "fragmento" de arquivo XHTML.  </p>
			</li><li class="listitem">
				<p><span class="bold"><strong>Template</strong></span> : é definida no arquivo <span class="emphasis"><em>.template.xml</em></span> que é um um arquivo XHTML, em geral parametrizado.</p>
			</li></ul></div>

		<p>Nos cabeçalhos dos arquivos de visão são definidas os namespaces de acordo com o 
		os elementos que serão utilizados no arquivo. No exemplo a seguir estão os namespaces de 
		um arquivo de Screen. </p>

		<div class="example" id="viewNamespace"><div class="example-title">Example 5.1. namespaces</div><div class="example-contents">
		    
			<pre class="programlisting">
xmlns="http://www.w3.org/1999/xhtml" 
xmlns:core="http://www.cruxframework.org/crux" 
xmlns:crux="http://www.cruxframework.org/crux/widgets"
xmlns:gwt="http://www.cruxframework.org/crux/gwt"		
			</pre>
		</div></div><br class="example-break"/>

	</section>

	<section class="sect1" id="sec_view_screen"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.2. Screen</h2></div></div></div>
		

		 <div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  os atributos e eventos de uma screen.</p>
			  </li><li class="listitem">
			    <p>ToDo :  O objeto Screen e como ele pode ser usado nas controllers para refernciar objetos na tela.</p>
			  </li></ul></div> 
		 </div>

		

		<p>A <span class="italic">sreen</span> no Crux é uma abstração para um documento, que por sua vêz pode conter 
		várias páginas (views). Ela é definida nos arquivos <span class="emphasis"><em>.crux.xml</em></span> que são arquivos XHTML.
		A <span class="italic">screen</span> vem declarada no corpo da página. Veja o exemplo a seguir. </p>

		<div class="example" id="viewScreenHello"><div class="example-title">Example 5.2. index.crux.xml</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#000080">&lt;!DOCTYPE</font></b> <font color="#009900">html</font><b><font color="#000080">&gt;</font></b>
<b><font color="#0000FF">&lt;html</font></b> 
    <font color="#009900">xmlns</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.w3.org/1999/xhtml</font><font color="#FF0000">"</font> 
    <font color="#009900">xmlns</font>:<font color="#009900">core</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux</font><font color="#FF0000">"</font> 
    <font color="#009900">xmlns</font>:<font color="#009900">crux</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/widgets</font><font color="#FF0000">"</font>
    <font color="#009900">xmlns</font>:<font color="#009900">gwt</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/gwt</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
    <b><font color="#0000FF">&lt;head&gt;</font></b> <b><font color="#0000FF">&lt;title&gt;</font></b>Exemplos CRUX<b><font color="#0000FF">&lt;/title&gt;</font></b> <b><font color="#0000FF">&lt;/head&gt;</font></b>
    <b><font color="#0000FF">&lt;body&gt;</font></b>
        <b><font color="#0000FF">&lt;script</font></b> <font color="#009900">type</font>=<font color="#FF0000">"</font><font color="#FF0000">text/javascript</font><font color="#FF0000">"</font> <font color="#009900">src</font>=<font color="#FF0000">"</font><font color="#FF0000">../exemploscrux/exemploscrux.nocache.js</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b><b><font color="#0000FF">&lt;/script&gt;</font></b>
        <b><font color="#0000FF">&lt;core:screen</font></b> <font color="#009900">useView</font>=<font color="#FF0000">"</font><font color="#FF0000">**/views/*</font><font color="#FF0000">"</font>
            <font color="#009900">smallViewport</font>=<font color="#FF0000">"</font><font color="#FF0000">user-scalable=no, width=320</font><font color="#FF0000">"</font>
            <font color="#009900">largeViewport</font>=<font color="#FF0000">"</font><font color="#FF0000">user-scalable=no, width=device-width, height=device-height</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
        <b><font color="#0000FF">&lt;crux:horizontalSwapViewContainer</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">views</font><font color="#FF0000">"</font> <font color="#009900">height</font>=<font color="#FF0000">"</font><font color="#FF0000">100%</font><font color="#FF0000">"</font> <font color="#009900">width</font>=<font color="#FF0000">"</font><font color="#FF0000">100%</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
            <b><font color="#0000FF">&lt;crux:view</font></b> <font color="#009900">name</font>=<font color="#FF0000">"</font><font color="#FF0000">mainhello</font><font color="#FF0000">"</font> <font color="#009900">active</font>=<font color="#FF0000">"</font><font color="#FF0000">true</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
        <b><font color="#0000FF">&lt;/crux:horizontalSwapViewContainer&gt;</font></b> 
    <b><font color="#0000FF">&lt;/body&gt;</font></b>
<b><font color="#0000FF">&lt;/html&gt;</font></b>
</tt></pre>
			</pre>
		</div></div><br class="example-break"/>

		<p> A <span class="italic">screen</span> se liga ao documento principal da página e cria a 
		<span class="italic">view</span> inicial declarada em : <code class="code">crux:view</code>. Na screen não definidos 
		os elementos da página a ser exibida, essas informações serão definidas nas <span class="italic">views</span>
		ou em um template.</p>

		<p>Existe um DOM associado a <span class="italic">screen</span> que é compartilhado por todas as views .... </p>

		<p>A diretiva <code class="code">script</code> no exemplo informa que o .... </p>

		<p>A <code class="code">c:screen</code> define como será  .... </p>

		<p>Também pode ser definida uma <span class="italic">controller</span> na <span class="italic">screen</span>
		e algum método ser executado ... </p>

		<p>Neste exemplo foi utilizado a diretiva <code class="code">crux:horizontalSwapViewContainer</code>,
		assim as trocas entre as views terão um efeito de "deslizar" ao serem alterada. </p>

		<section class="sect2" id="sec_view_screen_atrib"><div class="titlepage"><div><div><h3 class="title">5.2.1. Atributos da Screen</h3></div></div></div>
			
			
			<p>Alguns atributos da Screen:</p>

			<div class="table" id="d5e361"><div class="table-title">Table 5.1. Atributos da Screen</div><div class="table-contents">
				
				<table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col style="text-align: left; " class="c1"/><col style="text-align: left; " class="c2"/></colgroup><thead><tr><th style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Atributo</th><th style="text-align: left; border-bottom: 0.5pt solid ; ">Descrição</th></tr></thead><tbody><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">useController</td><td style="text-align: left; border-bottom: 0.5pt solid ; ">Define qual será a controler da Screen</td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">useView</td><td style="text-align: left; border-bottom: 0.5pt solid ; ">...	</td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; ">Viewports</td><td style="text-align: left; ">Para cada viewport podem ser definidas os detalhes de
							apresentação da tela. Temos: smallViewport, largeViewport ... </td></tr></tbody></table>
			</div></div><br class="table-break"/>
			
		</section>
		
		<section class="sect2" id="sec_view_screen_event"><div class="titlepage"><div><div><h3 class="title">5.2.2. Eventos da Screen</h3></div></div></div>
			
			
			<p>Os eventos da Screen são:</p>
			
			<div class="table" id="d5e383"><div class="table-title">Table 5.2. Eventos da Screen</div><div class="table-contents">
				
				<table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col style="text-align: left; " class="c1"/><col style="text-align: left; " class="c2"/></colgroup><thead><tr><th style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Evento </th><th style="text-align: left; border-bottom: 0.5pt solid ; "> Descrição </th></tr></thead><tbody><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Load </td><td style="text-align: left; border-bottom: 0.5pt solid ; ">Chamado quando a tela é carregada (load). Esse evento somente é disparado 
							depois que o processo de carregamento da página é concluído. </td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Close </td><td style="text-align: left; border-bottom: 0.5pt solid ; "> Chamado quando a pagina é fechada. </td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Closing </td><td style="text-align: left; border-bottom: 0.5pt solid ; "> Chamado antes de fechar a página.</td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Resize </td><td style="text-align: left; border-bottom: 0.5pt solid ; "> Chamado quando a pagina é redimencionada.</td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; "> HistoryChanged </td><td style="text-align: left; "> Chamado quando o botão de voltar do browser é acionado.</td></tr></tbody></table>
			</div></div><br class="table-break"/>

		</section>

	</section>

	<section class="sect1" id="sec_view_view"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.3. View</h2></div></div></div>
		
		
		<div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  Mais detalhes sobre os arquivos .view.xml. : viewName e viewID.</p>
			  </li><li class="listitem">
			    <p>ToDo :  O objeto View e como ele pode ser usado nas controllers para referenciar objetos na tela.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Os atributos e eventos de uma view.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Carga, ativacao e descarga de objetos view na aplicacao, assim como fragmentacao de scripts.</p>
			  </li><li class="listitem">
			    <p>ToDo :  O gerenciamento das views pelos view containers.</p>
			  </li></ul></div> 
		</div>		
		
		

		<p>A <span class="italic">View</span> no Crux é uma abstração para uma página. A view é definida nos arquivos 
		<span class="italic">.view.xml</span> que são arquivos XHTML. As views são carregadas dinâmicamente
		na screen de acordo com a navegação do usuário ou as ações da controller.</p>

		<p>O código a seguir apresenta uma <span class="italic">view</span> que contem um campo de entrada e um botão. 
		Essa é a <span class="italic">view</span> carregada pela <span class="italic">screen</span> da seção
		anterior. </p>
		
		<div class="example" id="viewViewHello"><div class="example-title">Example 5.3. mainhello.view.xml</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;v:view</font></b> 
	<font color="#009900">xmlns</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.w3.org/1999/xhtml</font><font color="#FF0000">"</font> 
	<font color="#009900">xmlns</font>:<font color="#009900">v</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/view</font><font color="#FF0000">"</font> 
	<font color="#009900">xmlns</font>:<font color="#009900">core</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux</font><font color="#FF0000">"</font> 
	<font color="#009900">xmlns</font>:<font color="#009900">crux</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/widgets</font><font color="#FF0000">"</font>
	<font color="#009900">xmlns</font>:<font color="#009900">gwt</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/gwt</font><font color="#FF0000">"</font>
	<font color="#009900">useResource</font>=<font color="#FF0000">"</font><font color="#FF0000">xStandardResources</font><font color="#FF0000">"</font>
	<font color="#009900">useController</font>=<font color="#FF0000">"</font><font color="#FF0000">helloController</font><font color="#FF0000">"</font> 
	<font color="#009900">height</font>=<font color="#FF0000">"</font><font color="#FF0000">100%</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b> 
	<b><font color="#0000FF">&lt;crux:styledPanel</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">outerPanel</font><font color="#FF0000">"</font> <font color="#009900">height</font>=<font color="#FF0000">"</font><font color="#FF0000">200px</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
		<b><font color="#0000FF">&lt;crux:formDisplay</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">form</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
			<b><font color="#0000FF">&lt;crux:entry</font></b> <font color="#009900">label</font>=<font color="#FF0000">"</font><font color="#FF0000">What is your name?</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
				<b><font color="#0000FF">&lt;gwt:textBox</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">nameTextBox</font><font color="#FF0000">"</font> <font color="#009900">width</font>=<font color="#FF0000">"</font><font color="#FF0000">200px</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
			<b><font color="#0000FF">&lt;/crux:entry&gt;</font></b>
			<b><font color="#0000FF">&lt;crux:entry</font></b> <font color="#009900">horizontalAlignment</font>=<font color="#FF0000">"</font><font color="#FF0000">center</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
				<b><font color="#0000FF">&lt;crux:button</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">okButton</font><font color="#FF0000">"</font> <font color="#009900">text</font>=<font color="#FF0000">"</font><font color="#FF0000">Ok!</font><font color="#FF0000">"</font> <font color="#009900">onSelect</font>=<font color="#FF0000">"</font><font color="#FF0000">helloController.sayHello</font><font color="#FF0000">"</font> 
				             <font color="#009900">style</font>=<font color="#FF0000">"</font><font color="#FF0000">display:block</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
			<b><font color="#0000FF">&lt;/crux:entry&gt;</font></b>
		<b><font color="#0000FF">&lt;/crux:formDisplay&gt;</font></b>
	<b><font color="#0000FF">&lt;/crux:styledPanel&gt;</font></b>
<b><font color="#0000FF">&lt;/v:view&gt;</font></b></tt></pre>
			</pre>
		</div></div><br class="example-break"/>
		
		<p>Além dos namespaces da screen a view ...</p>
		
		<p>Os compenentes Crux como o <span class="italic">crux:entry</span> encapsulam componetes GWT, e dependendo 
		do tamanho da tela podem, opde exemplo, apresentar o label do campo na frente ou acima do campo de texto. </p>
		
		<p>Os eventos da <span class="italic">view</span> também podem acionar métodos da <span class="italic">controller</span>.
		 No exmeplo anterior no <span class="italic">onSelect</span> do botão, é acionado o evento <span class="emphasis"><em>sayHello</em></span> da controller
		 <span class="italic">helloController</span>. O médodo <span class="italic">sayHello</span> irá manipular o valor do campo, 
		 e carregar uma nova <span class="italic">view</span>, a <span class="italic">messagehello</span>. Veja o método da 
		 <span class="italic">controller</span> a seguir:</p>
				
		<div class="example" id="viewControllerHello"><div class="example-title">Example 5.4. HelloController.java : sayHello</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>@Expose
<b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">sayHello</font></b><font color="#990000">(</font><font color="#990000">)</font>
<font color="#FF0000">{</font>
	HorizontalSwapContainer views <font color="#990000">=</font> <font color="#990000">(</font>HorizontalSwapContainer<font color="#990000">)</font> Screen<font color="#990000">.</font><b><font color="#000000">get</font></b><font color="#990000">(</font><font color="#FF0000">"views"</font><font color="#990000">)</font><font color="#990000">;</font>
	views<font color="#990000">.</font><b><font color="#000000">showView</font></b><font color="#990000">(</font><font color="#FF0000">"messagehello"</font><font color="#990000">)</font><font color="#990000">;</font>
	String name <font color="#990000">=</font> helloView<font color="#990000">.</font><b><font color="#000000">nameTextBox</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">.</font><b><font color="#000000">getValue</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
	name <font color="#990000">=</font> StringUtils<font color="#990000">.</font><b><font color="#000000">isEmpty</font></b><font color="#990000">(</font>name<font color="#990000">)</font> <font color="#990000">?</font> <font color="#FF0000">"Annonymous"</font> <font color="#990000">:</font> name<font color="#990000">;</font>
	messageView<font color="#990000">.</font><b><font color="#000000">messageLabel</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">.</font><b><font color="#000000">setText</font></b><font color="#990000">(</font><font color="#FF0000">"Hello, "</font> <font color="#990000">+</font> name <font color="#990000">+</font> <font color="#FF0000">"!"</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#FF0000">}</font>
</tt></pre>
			</pre>
		</div></div><br class="example-break"/>
		
		<p>No capítulo <a class="link" href="#chp_controller" title="Chapter 6. Camada de Controle">Camada de Controle</a> será apresentada 
		em detalhe a <span class="italic">controller</span>, seus os métodos e como ela pode 
		acessar os elementos da <span class="italic">view</span>. </p>

		<section class="sect2" id="sec_view_view_atrib"><div class="titlepage"><div><div><h3 class="title">5.3.1. Atributos da View</h3></div></div></div>
			
			
			<p>Alguns atributos da View:</p>

			<div class="table" id="d5e456"><div class="table-title">Table 5.3. Atributos da Screen</div><div class="table-contents">
				
				<table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col style="text-align: left; " class="c1"/><col style="text-align: left; " class="c2"/></colgroup><thead><tr><th style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Atributo</th><th style="text-align: left; border-bottom: 0.5pt solid ; ">Descrição</th></tr></thead><tbody><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">viewName</td><td style="text-align: left; border-bottom: 0.5pt solid ; ">O atributo viewName é o próprio nome da view, sem a extenção: <span class="italic">.view.xml</span>. 
							Esse atributo pode ser usado para referênviar a view pela Screen. </td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">viewID</td><td style="text-align: left; border-bottom: 0.5pt solid ; ">O atributo viewID .	</td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; ">aaa</td><td style="text-align: left; ">Para ... </td></tr></tbody></table>
			</div></div><br class="table-break"/>
			
		</section>
		
		<section class="sect2" id="sec_view_view_event"><div class="titlepage"><div><div><h3 class="title">5.3.2. Eventos da View</h3></div></div></div>
			
			
			<p>Os eventos da view são:</p>
			
			<div class="table" id="d5e479"><div class="table-title">Table 5.4. Eventos da Screen</div><div class="table-contents">
				
				<table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col style="text-align: left; " class="c1"/><col style="text-align: left; " class="c2"/></colgroup><thead><tr><th style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Evento </th><th style="text-align: left; border-bottom: 0.5pt solid ; "> Descrição </th></tr></thead><tbody><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Load </td><td style="text-align: left; border-bottom: 0.5pt solid ; ">Chamado quando a view é carregada .... </td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Close </td><td style="text-align: left; border-bottom: 0.5pt solid ; "> Chamado ... </td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; "> Create </td><td style="text-align: left; "> Chamado ....</td></tr></tbody></table>
			</div></div><br class="table-break"/>

		</section>
		
	</section>

	<section class="sect1" id="sec_view_template"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.4. Template</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  Mais detalhes sobre os arquivos .template.xml.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Como templates podem receber atributos e tags filhas como parametros.</p>
			  </li><li class="listitem">
			    <p>ToDo :  A geracao de XSDs para bibliotecas de templates e como elas podem ser 
			        usadas em arquivos .view.xml, .crux.xml, ou mesmo em outros templates.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Como um template poderia ser usado para montar um componente simples de forma declarativa.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Como um template poderia ser usado para montar um esqueleto reaproveitado de pagina, similar aos templates do struts.</p>
			  </li></ul></div> 
		</div>
		

		<p>O Template no Crux é defino no arquivo <span class="emphasis"><em>.template.xml</em></span> que é um arquivo XML parametrizado. Ele pode ser colocado em
		qualquer lugar do classpath, até mesmo em um arquivo .jar. </p>
		
		<p>Os templates podem ser usados para:</p>
		
		<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
			  	<p>Criar um fragmento que pode ser usado para compor páginas maiores.</p>
			</li><li class="listitem">
			  	<p>Criar um componete simples de maneira declarativa.</p>
			</li><li class="listitem">
			  	<p>Definir um layout de página reusável.</p>
			</li></ul></div>
		  
		
		<p>O código a seguir apresenta o exemplo de um template com um fragmento de uma página.
		O arquivo <span class="emphasis"><em>userinfo.template.xml</em></span> define um cabeçalho simples que exibe o login e o 
		nome do usuário.</p>
		
		<div class="example" id="viewTemplateUser"><div class="example-title">Example 5.5. userinfo.template.xml</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;t:template</font></b> <font color="#009900">xmlns</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.w3.org/1999/xhtml</font><font color="#FF0000">"</font>
	<font color="#009900">xmlns</font>:<font color="#009900">t</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/templates</font><font color="#FF0000">"</font>
	<font color="#009900">xmlns</font>:<font color="#009900">crux</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/widgets</font><font color="#FF0000">"</font>
	<font color="#009900">xmlns</font>:<font color="#009900">gwt</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/gwt</font><font color="#FF0000">"</font> 
	<font color="#009900">library</font>=<font color="#FF0000">"</font><font color="#FF0000">custom</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
	<b><font color="#0000FF">&lt;crux:styledPanel</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">panelUser</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
		<b><font color="#0000FF">&lt;crux:formDisplay</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">formUser</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
			<b><font color="#0000FF">&lt;crux:entry</font></b> <font color="#009900">label</font>=<font color="#FF0000">"</font><font color="#FF0000">Login:</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
				<b><font color="#0000FF">&lt;gwt:label</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">lbLogin</font><font color="#FF0000">"</font> <font color="#009900">text</font>=<font color="#FF0000">"</font><font color="#FF0000">user login</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
			<b><font color="#0000FF">&lt;/crux:entry&gt;</font></b>
			<b><font color="#0000FF">&lt;crux:entry</font></b> <font color="#009900">label</font>=<font color="#FF0000">"</font><font color="#FF0000">Name:</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
				<b><font color="#0000FF">&lt;gwt:label</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">lbName</font><font color="#FF0000">"</font> <font color="#009900">text</font>=<font color="#FF0000">"</font><font color="#FF0000">user name</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
			<b><font color="#0000FF">&lt;/crux:entry&gt;</font></b>
		<b><font color="#0000FF">&lt;/crux:formDisplay&gt;</font></b>
	<b><font color="#0000FF">&lt;/crux:styledPanel&gt;</font></b>
<b><font color="#0000FF">&lt;/t:template&gt;</font></b></tt></pre>
			</pre>
		</div></div><br class="example-break"/>

		<p>Para usar um template, basta incluir na <span class="emphasis"><em>screen</em></span> (ou na <span class="emphasis"><em>view</em></span>) a referência 
		ao template, no caso a <code class="code"> &lt;c:userinfo /&gt; </code>. Assim, quando a página for montada para
		exibição, o template é adicionado. Veja o exemplo a seguir do uso do template:</p>

		<div class="example" id="viewScreeHello2"><div class="example-title">Example 5.6. index.crux.xml - versão 2</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;html</font></b> 
    <font color="#009900">xmlns</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.w3.org/1999/xhtml</font><font color="#FF0000">"</font> 
    <font color="#009900">xmlns</font>:<font color="#009900">core</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux</font><font color="#FF0000">"</font> 
    <font color="#009900">xmlns</font>:<font color="#009900">crux</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/widgets</font><font color="#FF0000">"</font>
    <font color="#009900">xmlns</font>:<font color="#009900">gwt</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/gwt</font><font color="#FF0000">"</font>
    <font color="#009900">xmlns</font>:<font color="#009900">c</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/templates/custom</font><font color="#FF0000">"</font> <b><font color="#0000FF">&gt;</font></b>
    <b><font color="#0000FF">&lt;head&gt;</font></b> <b><font color="#0000FF">&lt;title&gt;</font></b>Exemplos CRUX<b><font color="#0000FF">&lt;/title&gt;</font></b> <b><font color="#0000FF">&lt;/head&gt;</font></b>
    <b><font color="#0000FF">&lt;body&gt;</font></b>
        <b><font color="#0000FF">&lt;script</font></b> <font color="#009900">type</font>=<font color="#FF0000">"</font><font color="#FF0000">text/javascript</font><font color="#FF0000">"</font> <font color="#009900">src</font>=<font color="#FF0000">"</font><font color="#FF0000">../exemploscrux/exemploscrux.nocache.js</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b><b><font color="#0000FF">&lt;/script&gt;</font></b>
        <b><font color="#0000FF">&lt;core:screen</font></b> <font color="#009900">useView</font>=<font color="#FF0000">"</font><font color="#FF0000">**/views/*</font><font color="#FF0000">"</font> 
            <font color="#009900">smallViewport</font>=<font color="#FF0000">"</font><font color="#FF0000">user-scalable=no, width=320</font><font color="#FF0000">"</font>
            <font color="#009900">largeViewport</font>=<font color="#FF0000">"</font><font color="#FF0000">user-scalable=no, width=device-width, height=device-height</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
        <b><font color="#0000FF">&lt;c:userinfo</font></b> <b><font color="#0000FF">/&gt;</font></b>
        <b><font color="#0000FF">&lt;crux:horizontalSwapViewContainer</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">views</font><font color="#FF0000">"</font> <font color="#009900">height</font>=<font color="#FF0000">"</font><font color="#FF0000">100%</font><font color="#FF0000">"</font> <font color="#009900">width</font>=<font color="#FF0000">"</font><font color="#FF0000">100%</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
            <b><font color="#0000FF">&lt;crux:view</font></b> <font color="#009900">name</font>=<font color="#FF0000">"</font><font color="#FF0000">mainhello</font><font color="#FF0000">"</font> <font color="#009900">active</font>=<font color="#FF0000">"</font><font color="#FF0000">true</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
        <b><font color="#0000FF">&lt;/crux:horizontalSwapViewContainer&gt;</font></b>
    <b><font color="#0000FF">&lt;/body&gt;</font></b>
<b><font color="#0000FF">&lt;/html&gt;</font></b></tt></pre>
			</pre>
		</div></div><br class="example-break"/>

		<section class="sect2" id="sec_view_template_parameter"><div class="titlepage"><div><div><h3 class="title">5.4.1. Parametrizando Templates</h3></div></div></div>
			
			
			<p>Um template pode para receber parametros (atributos) para exibir informações de acordo com o contexto onde será aplicado. 
			Para definir um atributo no template, basta escrever o atributo no formato <code class="code"> #{attributeName} </code>. 
			Neste ponto será feita a substituição da variável pelo valor correspondente.</p>
			
			<p>No exemplo a seguir é apresentada uma nova versão do <span class="emphasis"><em>userinfo.template.xml</em></span> agora com as 
			variáveis <code class="code">userLogin</code> e <code class="code">userName</code> que serão recebidas pelo template quando o mesmo for inserido e 
			não mais com valores fixos.</p>

			<div class="example" id="viewTemplateUser2"><div class="example-title">Example 5.7. userinfo.template.xml - versão 2</div><div class="example-contents">
			    
				<pre class="programlisting">
		 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;t:template</font></b> <font color="#009900">xmlns</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.w3.org/1999/xhtml</font><font color="#FF0000">"</font>
	<font color="#009900">xmlns</font>:<font color="#009900">t</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/templates</font><font color="#FF0000">"</font>
	<font color="#009900">xmlns</font>:<font color="#009900">crux</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/widgets</font><font color="#FF0000">"</font>
	<font color="#009900">xmlns</font>:<font color="#009900">gwt</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/gwt</font><font color="#FF0000">"</font> 
	<font color="#009900">library</font>=<font color="#FF0000">"</font><font color="#FF0000">custom</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
	<b><font color="#0000FF">&lt;crux:styledPanel</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">panelUser</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
		<b><font color="#0000FF">&lt;crux:formDisplay</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">formUser</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
			<b><font color="#0000FF">&lt;crux:entry</font></b> <font color="#009900">label</font>=<font color="#FF0000">"</font><font color="#FF0000">Login:</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
				<b><font color="#0000FF">&lt;gwt:label</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">lbLogin</font><font color="#FF0000">"</font> <font color="#009900">text</font>=<font color="#FF0000">"</font><font color="#FF0000">#{userLogin}</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
			<b><font color="#0000FF">&lt;/crux:entry&gt;</font></b>
			<b><font color="#0000FF">&lt;crux:entry</font></b> <font color="#009900">label</font>=<font color="#FF0000">"</font><font color="#FF0000">Name:</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
				<b><font color="#0000FF">&lt;gwt:label</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">lbName</font><font color="#FF0000">"</font> <font color="#009900">text</font>=<font color="#FF0000">"</font><font color="#FF0000">#{userName}</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
			<b><font color="#0000FF">&lt;/crux:entry&gt;</font></b>
		<b><font color="#0000FF">&lt;/crux:formDisplay&gt;</font></b>
	<b><font color="#0000FF">&lt;/crux:styledPanel&gt;</font></b>
<b><font color="#0000FF">&lt;/t:template&gt;</font></b></tt></pre>
				</pre>
			</div></div><br class="example-break"/>
		
			<p>Para essa nova versão do template, na <span class="italic">screen</span> ao incluir o template 
			<span class="italic">userinfo</span> agora são passados como parâmetros os nomes e os valores para os 
			atributos do template.</p>
 
			<div class="example" id="viewScreeHello3"><div class="example-title">Example 5.8. index.crux.xml - versão 3</div><div class="example-contents">
				
				<pre class="programlisting">
		 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;html</font></b> 
    <font color="#009900">xmlns</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.w3.org/1999/xhtml</font><font color="#FF0000">"</font> 
    <font color="#009900">xmlns</font>:<font color="#009900">core</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux</font><font color="#FF0000">"</font> 
    <font color="#009900">xmlns</font>:<font color="#009900">crux</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/widgets</font><font color="#FF0000">"</font>
    <font color="#009900">xmlns</font>:<font color="#009900">gwt</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/gwt</font><font color="#FF0000">"</font>
    <font color="#009900">xmlns</font>:<font color="#009900">c</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/templates/custom</font><font color="#FF0000">"</font> <b><font color="#0000FF">&gt;</font></b>
    <b><font color="#0000FF">&lt;head&gt;</font></b> <b><font color="#0000FF">&lt;title&gt;</font></b>Exemplos CRUX<b><font color="#0000FF">&lt;/title&gt;</font></b> <b><font color="#0000FF">&lt;/head&gt;</font></b>
    <b><font color="#0000FF">&lt;body&gt;</font></b>
        <b><font color="#0000FF">&lt;script</font></b> <font color="#009900">type</font>=<font color="#FF0000">"</font><font color="#FF0000">text/javascript</font><font color="#FF0000">"</font> <font color="#009900">src</font>=<font color="#FF0000">"</font><font color="#FF0000">../exemploscrux/exemploscrux.nocache.js</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b><b><font color="#0000FF">&lt;/script&gt;</font></b>
        <b><font color="#0000FF">&lt;core:screen</font></b> <font color="#009900">useView</font>=<font color="#FF0000">"</font><font color="#FF0000">**/views/*</font><font color="#FF0000">"</font> 
            <font color="#009900">smallViewport</font>=<font color="#FF0000">"</font><font color="#FF0000">user-scalable=no, width=320</font><font color="#FF0000">"</font>
            <font color="#009900">largeViewport</font>=<font color="#FF0000">"</font><font color="#FF0000">user-scalable=no, width=device-width, height=device-height</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
        <b><font color="#0000FF">&lt;c:userinfo</font></b> <font color="#009900">userLogin</font>=<font color="#FF0000">"</font><font color="#FF0000">joao</font><font color="#FF0000">"</font> <font color="#009900">userName</font>=<font color="#FF0000">"</font><font color="#FF0000">João da Silva</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
        <b><font color="#0000FF">&lt;crux:horizontalSwapViewContainer</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">views</font><font color="#FF0000">"</font> <font color="#009900">height</font>=<font color="#FF0000">"</font><font color="#FF0000">100%</font><font color="#FF0000">"</font> <font color="#009900">width</font>=<font color="#FF0000">"</font><font color="#FF0000">100%</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
            <b><font color="#0000FF">&lt;crux:view</font></b> <font color="#009900">name</font>=<font color="#FF0000">"</font><font color="#FF0000">mainhello</font><font color="#FF0000">"</font> <font color="#009900">active</font>=<font color="#FF0000">"</font><font color="#FF0000">true</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
        <b><font color="#0000FF">&lt;/crux:horizontalSwapViewContainer&gt;</font></b>
    <b><font color="#0000FF">&lt;/body&gt;</font></b>
<b><font color="#0000FF">&lt;/html&gt;</font></b></tt></pre>
				</pre>
			</div></div><br class="example-break"/>
			
			<p>Os valores dos atributos dos templates também podem ser manipulados por métodos da controller.</p>
			
		</section>

		
		<section class="sect2" id="sec_view_template_component"><div class="titlepage"><div><div><h3 class="title">5.4.2. Templates de Blocos</h3></div></div></div>
			

			<p>Uma aplicação para templates é definir um bloco de código para reuso, assim, estruturas que são usadas 
			regularmente podem ser definidas como se fossem um novo componente.  
			O exemplo a seguir é basicamente uma de caixa de texto com um label, que foi agrupada em um template. 
			Neste exemplo foi usado o recurso de parametrização dos elementos para deixar o componente mais flexivel.
			Veja o exemplo:</p>

			<div class="example" id="viewtemplateBloco"><div class="example-title">Example 5.9. entrytextbox.template.xml</div><div class="example-contents">
				
				<pre class="programlisting">
		 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;t:template</font></b> <font color="#009900">xmlns</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.w3.org/1999/xhtml</font><font color="#FF0000">"</font>
	<font color="#009900">xmlns</font>:<font color="#009900">t</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/templates</font><font color="#FF0000">"</font>
	<font color="#009900">xmlns</font>:<font color="#009900">core</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux</font><font color="#FF0000">"</font> 
	<font color="#009900">xmlns</font>:<font color="#009900">crux</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/widgets</font><font color="#FF0000">"</font>
	<font color="#009900">xmlns</font>:<font color="#009900">gwt</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/gwt</font><font color="#FF0000">"</font> 
	<font color="#009900">library</font>=<font color="#FF0000">"</font><font color="#FF0000">custom</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
	<b><font color="#0000FF">&lt;crux:entry</font></b>  <font color="#009900">label</font>=<font color="#FF0000">"</font><font color="#FF0000">#{label}:</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
		<b><font color="#0000FF">&lt;gwt:textBox</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">#{id}</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">#{value}</font><font color="#FF0000">"</font> <font color="#009900">width</font>=<font color="#FF0000">"</font><font color="#FF0000">200px</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;/crux:entry&gt;</font></b>
<b><font color="#0000FF">&lt;/t:template&gt;</font></b></tt></pre>
				</pre>
			</div></div><br class="example-break"/>

			<p> </p>
			
			<p>A utilização do template de bloco apresentado é da mesma maneira de um template personalizado. 
			Veja o exemplo a seguir do template em uma view do Crux:</p>

			<div class="example" id="viewviembloco"><div class="example-title">Example 5.10. textbox.view.xml</div><div class="example-contents">
				
				<pre class="programlisting">
		 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;v:view</font></b> 
	<font color="#009900">xmlns</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.w3.org/1999/xhtml</font><font color="#FF0000">"</font> 
	<font color="#009900">xmlns</font>:<font color="#009900">v</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/view</font><font color="#FF0000">"</font> 
	<font color="#009900">xmlns</font>:<font color="#009900">core</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux</font><font color="#FF0000">"</font> 
	<font color="#009900">xmlns</font>:<font color="#009900">crux</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/widgets</font><font color="#FF0000">"</font>
	<font color="#009900">xmlns</font>:<font color="#009900">gwt</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/gwt</font><font color="#FF0000">"</font>
	<font color="#009900">xmlns</font>:<font color="#009900">c</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/templates/custom</font><font color="#FF0000">"</font>
	<font color="#009900">useResource</font>=<font color="#FF0000">"</font><font color="#FF0000">xStandardResources</font><font color="#FF0000">"</font>
	<font color="#009900">useController</font>=<font color="#FF0000">"</font><font color="#FF0000">helloController</font><font color="#FF0000">"</font> 
	<font color="#009900">height</font>=<font color="#FF0000">"</font><font color="#FF0000">100%</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b> 
	<b><font color="#0000FF">&lt;crux:styledPanel</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">outerPanel</font><font color="#FF0000">"</font> <font color="#009900">height</font>=<font color="#FF0000">"</font><font color="#FF0000">200px</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
		<b><font color="#0000FF">&lt;crux:formDisplay</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">form</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
			<b><font color="#0000FF">&lt;c:entrytextbox</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">nameTextBox</font><font color="#FF0000">"</font> <font color="#009900">label</font>=<font color="#FF0000">"</font><font color="#FF0000">What is your name?</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">Your name here</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
			<b><font color="#0000FF">&lt;crux:entry</font></b> <font color="#009900">horizontalAlignment</font>=<font color="#FF0000">"</font><font color="#FF0000">center</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
				<b><font color="#0000FF">&lt;crux:button</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">okButton</font><font color="#FF0000">"</font> <font color="#009900">text</font>=<font color="#FF0000">"</font><font color="#FF0000">Ok!</font><font color="#FF0000">"</font> <font color="#009900">onSelect</font>=<font color="#FF0000">"</font><font color="#FF0000">helloController.sayHello</font><font color="#FF0000">"</font> 
				             <font color="#009900">style</font>=<font color="#FF0000">"</font><font color="#FF0000">display:block</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
			<b><font color="#0000FF">&lt;/crux:entry&gt;</font></b>
		<b><font color="#0000FF">&lt;/crux:formDisplay&gt;</font></b>
	<b><font color="#0000FF">&lt;/crux:styledPanel&gt;</font></b>
<b><font color="#0000FF">&lt;/v:view&gt;</font></b></tt></pre>
				</pre>
			</div></div><br class="example-break"/>
			
			<p>Os tempaltes de blocos podem ser utilizados para quaisquer situações onde seja necessário o uso de estruturas
			mais "elaboradas" deixando o código da view mais simples.</p>

		</section>
		
		<section class="sect2" id="sec_view_template_layout"><div class="titlepage"><div><div><h3 class="title">5.4.3. Templates de Layouts</h3></div></div></div>
			
			
			<p>O arquivo <span class="emphasis"><em>pagelayout.template.xml</em></span> define um template de layout de pagina. 
			Neste layout é exibido um menu à esquerda e um espaço para ser inserido o corpo da página.</p>

			<div class="example" id="viewtemplatelayout"><div class="example-title">Example 5.11. pagelayout.template.xml</div><div class="example-contents">
				
				<pre class="programlisting">
		 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;v:view</font></b> 
	<font color="#009900">xmlns</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.w3.org/1999/xhtml</font><font color="#FF0000">"</font> 
	<font color="#009900">xmlns</font>:<font color="#009900">v</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/view</font><font color="#FF0000">"</font> 
	<font color="#009900">xmlns</font>:<font color="#009900">core</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux</font><font color="#FF0000">"</font> 
	<font color="#009900">xmlns</font>:<font color="#009900">crux</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/widgets</font><font color="#FF0000">"</font>
	<font color="#009900">xmlns</font>:<font color="#009900">gwt</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/gwt</font><font color="#FF0000">"</font>
	<font color="#009900">xmlns</font>:<font color="#009900">c</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/templates/custom</font><font color="#FF0000">"</font>
	<font color="#009900">useResource</font>=<font color="#FF0000">"</font><font color="#FF0000">xStandardResources</font><font color="#FF0000">"</font>
	<font color="#009900">useController</font>=<font color="#FF0000">"</font><font color="#FF0000">helloController</font><font color="#FF0000">"</font> 
	<font color="#009900">height</font>=<font color="#FF0000">"</font><font color="#FF0000">100%</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b> 
	<b><font color="#0000FF">&lt;crux:styledPanel</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">outerPanel</font><font color="#FF0000">"</font> <font color="#009900">height</font>=<font color="#FF0000">"</font><font color="#FF0000">200px</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
		<b><font color="#0000FF">&lt;crux:formDisplay</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">form</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
			<b><font color="#0000FF">&lt;c:entrytextbox</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">nameTextBox</font><font color="#FF0000">"</font> <font color="#009900">label</font>=<font color="#FF0000">"</font><font color="#FF0000">What is your name?</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">Your name here</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
			<b><font color="#0000FF">&lt;crux:entry</font></b> <font color="#009900">horizontalAlignment</font>=<font color="#FF0000">"</font><font color="#FF0000">center</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
				<b><font color="#0000FF">&lt;crux:button</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">okButton</font><font color="#FF0000">"</font> <font color="#009900">text</font>=<font color="#FF0000">"</font><font color="#FF0000">Ok!</font><font color="#FF0000">"</font> <font color="#009900">onSelect</font>=<font color="#FF0000">"</font><font color="#FF0000">helloController.sayHello</font><font color="#FF0000">"</font> 
				             <font color="#009900">style</font>=<font color="#FF0000">"</font><font color="#FF0000">display:block</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
			<b><font color="#0000FF">&lt;/crux:entry&gt;</font></b>
		<b><font color="#0000FF">&lt;/crux:formDisplay&gt;</font></b>
	<b><font color="#0000FF">&lt;/crux:styledPanel&gt;</font></b>
<b><font color="#0000FF">&lt;/v:view&gt;</font></b></tt></pre>
				</pre>
			</div></div><br class="example-break"/>

			<pre class="programlisting">

&lt;t:template xmlns="http://www.w3.org/1999/xhtml"
      xmlns:t="http://www.cruxframework.org/templates" 
      xmlns:crux="http://www.cruxframework.org/crux/widgets"
      xmlns:gwt="http://www.cruxframework.org/crux/gwt" 
      xmlns:c="http://www.cruxframework.org/templates/custom" 
          library="custom"&gt;

   &lt;gwt:dockPanel id="centeringPanel" width="100%" height="100%"&gt;
      &lt;gwt:cell direction="north" height="70" verticalAlignment="top"&gt;
          &lt;c:userInfo /&gt;
      &lt;/gwt:cell&gt;
      &lt;gwt:cell direction="south"&gt;
         &lt;gwt:dockPanel id="menuTabsDividerPannel"&gt;
            &lt;gwt:cell direction="west"&gt;
               &lt;crux:stackMenu id="menu" onLoadWidget="#{onLoadMenu}" &gt;&lt;/crux:stackMenu&gt;
            &lt;/gwt:cell&gt;
            &lt;gwt:cell direction="east"&gt;
               &lt;t:section name="body" /&gt;
            &lt;/gwt:cell&gt;
         &lt;/gwt:dockPanel&gt;
      &lt;/gwt:cell&gt;
   &lt;/gwt:dockPanel&gt;
&lt;/t:template&gt;

			</pre>
			
			<p>Note que o template <span class="emphasis"><em>pageLayout.template.xml</em></span> também usou o <span class="emphasis"><em>userInfo.template.xml</em></span>, 
			definido anteriormente <a class="xref" href="#sec_view_template_parameter" title="5.4.1. Parametrizando Templates">Section 5.4.1, “Parametrizando Templates”</a> no seu cabeçalho.</p>
			
			<p>O template criado anteriomente pode ser usado para definir uma nova página Crux com o exemplo a seguir.</p>

			<div class="example" id="viewtemplatelayoutindex"><div class="example-title">Example 5.12. index.crux.xml</div><div class="example-contents">
				
				<pre class="programlisting">
		 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;html</font></b> <font color="#009900">xmlns</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.w3.org/1999/xhtml</font><font color="#FF0000">"</font> 
      <font color="#009900">xmlns</font>:<font color="#009900">crux</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux</font><font color="#FF0000">"</font> 
      <font color="#009900">xmlns</font>:<font color="#009900">gwt</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/crux/gwt</font><font color="#FF0000">"</font> 
      <font color="#009900">xmlns</font>:<font color="#009900">c</font>=<font color="#FF0000">"</font><font color="#FF0000">http://www.cruxframework.org/templates/custom</font><font color="#FF0000">"</font> <b><font color="#0000FF">&gt;</font></b>
   <b><font color="#0000FF">&lt;head&gt;</font></b>
       <b><font color="#0000FF">&lt;script</font></b> <font color="#009900">language</font>=<font color="#FF0000">"</font><font color="#FF0000">javascript</font><font color="#FF0000">"</font> <font color="#009900">src</font>=<font color="#FF0000">"</font><font color="#FF0000">cruxtest/cruxtest.nocache.js</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b><b><font color="#0000FF">&lt;/script&gt;</font></b>
   <b><font color="#0000FF">&lt;/head&gt;</font></b>
   <b><font color="#0000FF">&lt;body&gt;</font></b>
      <b><font color="#0000FF">&lt;crux:screen</font></b> <font color="#009900">useController</font>=<font color="#FF0000">"</font><font color="#FF0000">myController</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
      <b><font color="#0000FF">&lt;c:pageLayout</font></b> <font color="#009900">onLoadMenu</font>=<font color="#FF0000">"</font><font color="#FF0000">myController.loadMenuItems</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
         <b><font color="#0000FF">&lt;c:body&gt;</font></b>
            <i><font color="#9A1900">&lt;!--</font></i><i><font color="#9A1900"> Body comes here </font></i><i><font color="#9A1900">--&gt;</font></i>
            <b><font color="#0000FF">&lt;gwt:label</font></b> <font color="#009900">id</font>=<font color="#FF0000">"</font><font color="#FF0000">test</font><font color="#FF0000">"</font> <font color="#009900">text</font>=<font color="#FF0000">"</font><font color="#FF0000">Hello World!!</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
         <b><font color="#0000FF">&lt;/c:body&gt;</font></b>
      <b><font color="#0000FF">&lt;/c:pageLayout&gt;</font></b>
   <b><font color="#0000FF">&lt;/body&gt;</font></b>
<b><font color="#0000FF">&lt;/html&gt;</font></b></tt></pre>
				</pre>
			</div></div><br class="example-break"/>

			<pre class="programlisting">

&lt;html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:crux="http://www.cruxframework.org/crux" 
      xmlns:gwt="http://www.cruxframework.org/crux/gwt" 
      xmlns:c="http://www.cruxframework.org/templates/custom" &gt;
   &lt;head&gt;
       &lt;script language="javascript" src="cruxtest/cruxtest.nocache.js"&gt;&lt;/script&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;crux:screen useController="myController" /&gt;
      &lt;c:pageLayout onLoadMenu="myController.loadMenuItems"&gt;
         &lt;c:body&gt;
            &lt;!-- Body comes here --&gt;
            &lt;gwt:label id="test" text="Hello World!!" /&gt;
         &lt;/c:body&gt;
      &lt;/c:pageLayout&gt;
   &lt;/body&gt;
&lt;/html&gt;

			</pre>
			
		</section>
		
	</section>

	<section class="sect1" id="sec_view_events_call"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.5. Chamada de Eventos</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>	
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  Como devem ser as chamadas de eventos na View.</p>
			  </li><li class="listitem">
			    <p>ToDo :  O que é useController e quais as chamadas nos .view.xml.</p>
			  </li></ul></div> 
		</div>




		<p>To add an event declaratively, you must create a Controller and give it a name.</p>

		<p> An event declaration must follow the pattern 
		"onEventName" = "controllerName.methodName". For example:</p>		
		  
		
		<pre class="programlisting">

&lt;html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:crux="http://www.cruxframework.org/crux" 
      xmlns:gwt="http://www.cruxframework.org/crux/gwt" &gt;
   &lt;head&gt;
       &lt;script language="javascript" src="cruxtest/cruxtest.nocache.js"&gt;&lt;/script&gt;
   &lt;/head&gt;
   &lt;body&gt;
       &lt;crux:screen onClose='clientHandler.onClose' useController="clientHandler" &gt;
               &lt;gwt:textBox id="myBox" /&gt;
               &lt;gwt:button id="myButton" text="Hello" onClick="clientHandler.helloWorld" /&gt;
           &lt;/crux:screen&gt;
   &lt;/body&gt;
&lt;/html&gt;

		</pre>

Note that you must also "import" your controller through the attribute useController of the screen's tag. 

	</section>

</section>


<section class="chapter" id="chp_controller"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Camada de Controle</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="sect1"><a href="#sec_control_anot">6.1. Anotações das <span class="italic">Controllers</span></a></span><ul><li><span class="sect2"><a href="#sec_control_anot_controler">6.1.1. @Controller </a></span></li><li><span class="sect2"><a href="#sec_control_anot_inject">6.1.2. @Inject</a></span></li><li><span class="sect2"><a href="#sec_control_anot_expose">6.1.3. @Expose</a></span></li></ul></li><li><span class="sect1"><a href="#sec_control_ioc">6.2. Inversion of Control (IoC)</a></span><ul><li><span class="sect2"><a href="#sec_control_ioc_scope">6.2.1. Escopo dos objetos criados</a></span></li><li><span class="sect2"><a href="#sec_control_ioc_conf">6.2.2. Configurações globais do container</a></span></li></ul></li><li><span class="sect1"><a href="#sec_control_valuebind">6.3. Value Binding</a></span></li><li><span class="sect1"><a href="#sec_control_screen">6.4. Usando as Controllers na View</a></span></li><li><span class="sect1"><a href="#sec_control_comunic">6.5. Comunicação entre controladores</a></span></li><li><span class="sect1"><a href="#sec_control_val">6.6. Validação</a></span></li><li><span class="sect1"><a href="#sec_control_rpc_call">6.7. Chamada de Serviços RPC</a></span></li><li><span class="sect1"><a href="#sec_control_rest_call">6.8. Chamada de Serviços REST</a></span></li></ul></div>
	

	<p>Este capítulo apresenta a camada de controle do Crux Framework.
	As classes de controle são chamadas para tratar os eventos de tela da aplicação. Para definir uma <span class="italic">Controller</span> 
	basta criar uma classe Java com a anotação <span class="italic">@Controller</span>. Na anotação deve ser informado
	o nome pelo qual a classe de controle será referenciada nas páginas.</p>

	<p>Veja o exemplo a seguir.</p>

	<div class="example" id="simpleController"><div class="example-title">Example 6.1. Definindo uma <code class="code">Controller</code></div><div class="example-contents">
	    
		<pre class="programlisting">
 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>@<b><font color="#000000">Controller</font></b><font color="#990000">(</font><font color="#FF0000">"myController"</font><font color="#990000">)</font>
<b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> MyController <font color="#FF0000">{</font>
	 <i><font color="#9A1900">//</font></i><i><font color="#9A1900"> ... event handlers here</font></i>
<font color="#FF0000">}</font>
</tt></pre>
		</pre>
	</div></div><br class="example-break"/>

	<p>A classe de controle define os métodos para tratar eventos nas telas da aplicação. Os métodos de controle devem:</p>
	
	<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
			<p>Ter visibilidae pública (<span class="italic">public</span>). </p>
		</li><li class="listitem">
			<p>Estar marcado com a anotação  <span class="italic">@Expose</span>.</p>
		</li><li class="listitem">
			<p>Deve declarar apenas um ou nenhum parâmetro. Se tiver um parâmetro, este deve ser um subtipo de <span class="italic">GwtEvent</span> 
			e o método somente pode ser utilizado para tratar esse tipo de evento.</p>
		</li></ul></div>
	
    <p>Veja o exemplo a seguir, com alguns métodos:</p>

	<div class="example" id="simpleControllerMethods"><div class="example-title">Example 6.2. Métodos em uma <code class="code">Controller</code></div><div class="example-contents">
	    
		<pre class="programlisting">
 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>@<b><font color="#000000">Controller</font></b><font color="#990000">(</font><font color="#FF0000">"clientHandler"</font><font color="#990000">)</font>
<b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> MyController <font color="#FF0000">{</font>
   @Expose
   <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">helloWorld</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#FF0000">{</font> 
	   <i><font color="#9A1900">//</font></i><i><font color="#9A1900"> code here   </font></i>
   <font color="#FF0000">}</font>
   
   @Expose
   <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">onClose</font></b><font color="#990000">(</font>CloseEvent<font color="#990000">&lt;</font>Window<font color="#990000">&gt;</font> event<font color="#990000">)</font> <font color="#FF0000">{</font> 
	   <i><font color="#9A1900">//</font></i><i><font color="#9A1900"> code here   </font></i>
   <font color="#FF0000">}</font>
   
   <b><font color="#0000FF">protected</font></b> <font color="#009900">void</font> <b><font color="#000000">myMethod</font></b><font color="#990000">(</font>String string<font color="#990000">)</font> <font color="#FF0000">{</font> 
	   <i><font color="#9A1900">//</font></i><i><font color="#9A1900"> code here   </font></i>
   <font color="#FF0000">}</font>
<font color="#FF0000">}</font>
</tt></pre>
		</pre>
	</div></div><br class="example-break"/>

	<p>Note que nesta <span class="italic">Controller</span> existe um método que não atende as condições para 
	tratamento de eventos, o <span class="italic">myMethod</span>. 
	Este método não pode ser chamando de forma declarativa. </p>

	<section class="sect1" id="sec_control_anot"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.1. Anotações das <span class="italic">Controllers</span></h2></div></div></div>
		

		<p>O Crux disponibiliza uma série de anotações para auxiliar na codificação das classes de controle.
		A seguir são apresentadas as anotações que podem ser utilizadas nesta camada.</p>

		<section class="sect2" id="sec_control_anot_controler"><div class="titlepage"><div><div><h3 class="title">6.1.1. @Controller </h3></div></div></div>
			
			
			<p>Esta anotação é utilizada para marcar uma classe como sendo uma <span class="italic">Controller</span>. Toda classe de controle
			deve estar marcada com esta anotação. A tabela abaixo mostra todos os seus atributos:</p>
			
			<div class="table" id="d5e631"><div class="table-title">Table 6.1. Atributos da <span class="italic">@Controller</span></div><div class="table-contents">
				
				<table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col style="text-align: left; " class="c1"/><col style="text-align: left; " class="c2"/><col style="text-align: left; " class="c3"/><col style="text-align: left; " class="c4"/></colgroup><thead><tr><th style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Propriedade </th><th style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Requerida </th><th style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Valor Padrão </th><th style="text-align: left; border-bottom: 0.5pt solid ; "> Descrição </th></tr></thead><tbody><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> value</td><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Sim</td><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Sem valor</td><td style="text-align: left; border-bottom: 0.5pt solid ; "> Define o nome da <span class="italic">Controller</span>. 
							Usado nas paginas para referenciar a <span class="italic">Controller</span>.</td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> stateful</td><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Não</td><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> true</td><td style="text-align: left; border-bottom: 0.5pt solid ; "> Se for "true" uma mesma instância da classe de controle é usada
							para tratar todos os eventos a ela direcionados, dentro da mesma View. 
							Se for "false" uma nova instancia é usada para cada novo evento.</td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> lazy</td><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Não</td><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> true</td><td style="text-align: left; border-bottom: 0.5pt solid ; "> Se for "true" o objeto <span class="italic">Controller</span> é construído apenas quando
							é chamado pela primeira vez.</td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; "> supportedDevices</td><td style="text-align: left; border-right: 0.5pt solid ; "> Não</td><td style="text-align: left; border-right: 0.5pt solid ; "> Device.all	</td><td style="text-align: left; "> Pode-se optar por usar a classe anotada apenas para uma lista restrita de dispositivos. Isso permite que se 
							crie duas classes diferentes, usando o mesmo nome do controlador, mas um voltada para um conjunto de dispositivos e  
							outra voltada para um conjunto diferente.</td></tr></tbody></table>
			</div></div><br class="table-break"/>
	
		</section>

		<section class="sect2" id="sec_control_anot_inject"><div class="titlepage"><div><div><h3 class="title">6.1.2. @Inject</h3></div></div></div>
			

			<p>O Crux oferece um container IoC para ser utilizado no lado cliente da aplicação. Desta forma, pode-se anotar as classes de controle
			da aplicação para definir a forma como objetos utilizados são instanciados e associados às classes de controle.</p>

			<p>Veja abaixo um pequeno exemplo:</p>

			<div class="example" id="iocControllerSample"><div class="example-title">Example 6.3. Injeção de valores na <code class="code">Controller</code></div><div class="example-contents">
			    
				<pre class="programlisting">
		 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>@<b><font color="#000000">Controller</font></b><font color="#990000">(</font><font color="#FF0000">"myIoCController"</font><font color="#990000">)</font>
<b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> MyIoCController <font color="#FF0000">{</font>
    @Inject
    <b><font color="#0000FF">private</font></b> GreetingServiceAsync service<font color="#990000">;</font> 
    
    <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">setService</font></b><font color="#990000">(</font>GreetingServiceAsync service<font color="#990000">)</font> <font color="#FF0000">{</font>
    	<b><font color="#0000FF">this</font></b><font color="#990000">.</font>service <font color="#990000">=</font> service<font color="#990000">;</font>
    <font color="#FF0000">}</font>
    <i><font color="#9A1900">//</font></i><i><font color="#9A1900"> other event handlers</font></i>
<font color="#FF0000">}</font>
</tt></pre>
				</pre>
			</div></div><br class="example-break"/>

			<p>A seção <a class="xref" href="#sec_control_ioc" title="6.2. Inversion of Control (IoC)">Inversion of Control (IoC)</a> apresenta o funcionamento deste container IoC do Crux.</p>
		</section>
		
		<section class="sect2" id="sec_control_anot_expose"><div class="titlepage"><div><div><h3 class="title">6.1.3. @Expose</h3></div></div></div>
			

			<p>O <span class="italic">@Expose</span> é a anotação usada para expor 
            um método como tratador de evento. Todo método que vá ser usado para tratamento de um evento declarado em uma tela da aplicação deve estar 
            anotado com esta anotação.</p>	
		</section>
		
	</section>

	<section class="sect1" id="sec_control_ioc"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.2. Inversion of Control (IoC)</h2></div></div></div>
		
		<p>O Crux disponibiliza um container IoC para o lado cliente da aplicação. Classes no lado cliente podem ser anotadas com a 
		anotação <code class="code">@Inject</code> para popular suas propriedades a partir do container IoC.</p>
		
		<p>Para que uma propriedade da classe cliente possa ser atribuída pelo container IoC, é necessário que a mesma:</p>

		<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
				<p>Tenha visibilidade pública. Para isso, o atributo deve ser público ou possuir um método de escrita (setter) público.</p>
			</li><li class="listitem">
				<p>Esteja marcada com a anotação  <span class="italic">@Inject</span>.</p>
			</li></ul></div>

		<p>Veja o exemplo abaixo:</p>

		<div class="example" id="iocControllerProperties"><div class="example-title">Example 6.4. Propriedades injetadas pelo container IoC</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>@<b><font color="#000000">Controller</font></b><font color="#990000">(</font><font color="#FF0000">"myIoCController"</font><font color="#990000">)</font>
<b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> MyIoCController <font color="#FF0000">{</font>
    @Inject
    <b><font color="#0000FF">private</font></b> GreetingServiceAsync service<font color="#990000">;</font> 
    
    <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">setService</font></b><font color="#990000">(</font>GreetingServiceAsync service<font color="#990000">)</font> <font color="#FF0000">{</font>
    	<b><font color="#0000FF">this</font></b><font color="#990000">.</font>service <font color="#990000">=</font> service<font color="#990000">;</font>
    <font color="#FF0000">}</font>
    
    @Inject
    <b><font color="#0000FF">public</font></b> AnotherPojo property<font color="#990000">;</font>

    @Inject
    <b><font color="#0000FF">private</font></b> OtherPojo property2<font color="#990000">;</font> <i><font color="#9A1900">//</font></i><i><font color="#9A1900">NOT VALID.</font></i>

    <i><font color="#9A1900">//</font></i><i><font color="#9A1900"> other event handlers</font></i>
<font color="#FF0000">}</font>
</tt></pre>
			</pre>
		</div></div><br class="example-break"/>

		<p>Repare que a propriedade <code class="code">property2</code> não pode ser atribuída pelo container, pois não obedece os critérios definidos acima.</p>

		<p>Outro ponto importante é que a classe <code class="code">AnotherPojo</code>, referenciada no exemplo acima, também pode definir propriedades a serem 
		injetadas pelo container, da mesma forma como foi demonstrado nesta classe de controle.</p>

		<section class="sect2" id="sec_control_ioc_scope"><div class="titlepage"><div><div><h3 class="title">6.2.1. Escopo dos objetos criados</h3></div></div></div>
			

			<p>Pode-se definir o escopo utilizado para leitura dos objetos a serem injetados pelo container IoC. A anotação <code class="code">@Inject</code> possui uma
			propriedade chamada <code class="code">scope</code> que define o escopo do objeto injetado. Veja o exemplo abaixo:</p>

			<div class="example" id="iocControllerScope"><div class="example-title">Example 6.5. Escopo dos objetos junto ao container IoC</div><div class="example-contents">
			    
				<pre class="programlisting">
		 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>@<b><font color="#000000">Controller</font></b><font color="#990000">(</font><font color="#FF0000">"myIoCController"</font><font color="#990000">)</font>
<b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> MyIoCController <font color="#FF0000">{</font>
	
	@<b><font color="#000000">Inject</font></b><font color="#990000">(</font>scope<font color="#990000">=</font>Scope<font color="#990000">.</font>DOCUMENT<font color="#990000">)</font>
	<b><font color="#0000FF">public</font></b> AnotherPojo property<font color="#990000">;</font>

	@<b><font color="#000000">Inject</font></b><font color="#990000">(</font>scope<font color="#990000">=</font>Scope<font color="#990000">.</font>VIEW<font color="#990000">)</font>
	<b><font color="#0000FF">public</font></b> AnotherPojo property2<font color="#990000">;</font>

	@<b><font color="#000000">Inject</font></b><font color="#990000">(</font>scope<font color="#990000">=</font>Scope<font color="#990000">.</font>LOCAL<font color="#990000">)</font>
	<b><font color="#0000FF">public</font></b> AnotherPojo property3<font color="#990000">;</font>
<font color="#FF0000">}</font>
</tt></pre>
				</pre>
			</div></div><br class="example-break"/>
			
			<p>Existem três tipos de escopo suportados pelo Crux, descritos na tabela abaixo:</p>
			
			<div class="table" id="d5e711"><div class="table-title">Table 6.2. Tipos de Escopo suportados pelo container IoC</div><div class="table-contents">
				
				<table style="border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col style="text-align: left; " class="c1"/><col style="text-align: left; " class="c2"/></colgroup><thead><tr><th style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "> Nome </th><th style="text-align: left; border-bottom: 0.5pt solid ; "> Descrição </th></tr></thead><tbody><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="code">Scope.LOCAL</code></td><td style="text-align: left; border-bottom: 0.5pt solid ; "> O objeto injetado tem escopo apenas local. Cada vez que um objeto é injetado com escopo local, 
							uma nova instância é criada pelo container.</td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="code">Scope.DOCUMENT</code></td><td style="text-align: left; border-bottom: 0.5pt solid ; "> O objeto injetado tem escopo associado ao Document da aplicação. Todas as classes carregadas por todas as views 
							que injetarem um objeto com este escopo irão compartilhar a mesma referência.</td></tr><tr><td style="text-align: left; border-right: 0.5pt solid ; "><code class="code">Scope.VIEW</code></td><td style="text-align: left; "> O objeto injetado tem escopo associado à <code class="code">View</code> corrente. Todas as classes carregadas dentro da 
							<code class="code">View</code> corrente que injetarem um objeto com este escopo irão compartilhar a mesma referência.</td></tr></tbody></table>
			</div></div><br class="table-break"/>
			
			<p>Caso não seja informado nada, o valor padrão para o escopo da injeção é <code class="code">Scope.LOCAL</code>.</p>

			<p>É possível, também, definir subescopos personalizados, através da propriedade <code class="code">subscope</code> da anotação <code class="code">@Inject</code>.
			Veja o exemplo abaixo:</p>
			
			<div class="example" id="iocControllerSubscope"><div class="example-title">Example 6.6. Sub-escopo para objetos junto ao container IoC</div><div class="example-contents">
			    
				<pre class="programlisting">
		 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>@<b><font color="#000000">Controller</font></b><font color="#990000">(</font><font color="#FF0000">"myIoCController"</font><font color="#990000">)</font>
<b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> MyIoCController <font color="#FF0000">{</font>
	
	@<b><font color="#000000">Inject</font></b><font color="#990000">(</font>scope<font color="#990000">=</font>Scope<font color="#990000">.</font>DOCUMENT<font color="#990000">,</font> subscope<font color="#990000">=</font><font color="#FF0000">"Atendimento"</font><font color="#990000">)</font>
	<b><font color="#0000FF">public</font></b> AnotherPojo property<font color="#990000">;</font>

	@<b><font color="#000000">Inject</font></b><font color="#990000">(</font>scope<font color="#990000">=</font>Scope<font color="#990000">.</font>VIEW<font color="#990000">,</font> subscope<font color="#990000">=</font><font color="#FF0000">"Custom"</font><font color="#990000">)</font>
	<b><font color="#0000FF">public</font></b> AnotherPojo property2<font color="#990000">;</font>

	@<b><font color="#000000">Inject</font></b><font color="#990000">(</font>scope<font color="#990000">=</font>Scope<font color="#990000">.</font>LOCAL<font color="#990000">)</font>
	<b><font color="#0000FF">public</font></b> AnotherPojo property3<font color="#990000">;</font>
<font color="#FF0000">}</font>
</tt></pre>
				</pre>
			</div></div><br class="example-break"/>
			
			<p>O mapeamento feito para a propriedade <code class="code">property</code>, por exemplo, define um escopo chamado <code class="code">"Atendimento"</code> 
			dentro do escopo global <code class="code">Scope.DOCUMENT</code>. Desta forma, duas classes que acessem esta propriedade com estas mesmas
			informações de escopo, irão compartilhar a mesma instância, mesmo que localizadas em <code class="code">Views</code> diferentes.</p>
			
			<p>O mapeamento feito para a propriedade <code class="code">property2</code>, cria um escopo chamado <code class="code">"Custom"</code> 
			dentro do escopo <code class="code">Scope.VIEW</code>. Desta forma, duas classes que acessem esta propriedade com estas mesmas
			informações de escopo, irão compartilhar a mesma instância apenas se estiverem na mesma <code class="code">View</code>. Cada 
			<code class="code">View</code> irá conter uma cópia particular do contexto <code class="code">"Custom"</code>.</p>
			
			<p>Caso o escopo principal seja definido como <code class="code">Scope.LOCAL</code>, qualquer informação de subescopo será ignorada.</p>

		</section>

		<section class="sect2" id="sec_control_ioc_conf"><div class="titlepage"><div><div><h3 class="title">6.2.2. Configurações globais do container</h3></div></div></div>
			

			<p>Para realizar configurações adicionais junto ao container IoC do Crux, deve-se criar uma classe que estenda 
			<code class="code">IocContainerConfigurations</code>. Veja o exemplo abaixo:</p>

			<div class="example" id="iocConfig"><div class="example-title">Example 6.7. Configuração do Container IoC</div><div class="example-contents">
			    
				<pre class="programlisting">
		 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> MyConfigurations <b><font color="#0000FF">extends</font></b> IocContainerConfigurations <font color="#FF0000">{</font>

    <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">configure</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#FF0000">{</font>
        <b><font color="#000000">bindType</font></b><font color="#990000">(</font>List<font color="#990000">.</font><b><font color="#0000FF">class</font></b><font color="#990000">)</font><font color="#990000">.</font><b><font color="#000000">toClass</font></b><font color="#990000">(</font>ArrayList<font color="#990000">.</font><b><font color="#0000FF">class</font></b><font color="#990000">)</font><font color="#990000">;</font>
        <b><font color="#000000">bindType</font></b><font color="#990000">(</font>MyBaseType<font color="#990000">.</font><b><font color="#0000FF">class</font></b><font color="#990000">)</font><font color="#990000">.</font><b><font color="#000000">toProvider</font></b><font color="#990000">(</font>MyBaseTypeProvider<font color="#990000">.</font><b><font color="#0000FF">class</font></b><font color="#990000">)</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>
<font color="#FF0000">}</font>
</tt></pre>
				</pre>
			</div></div><br class="example-break"/>
			
			<p>O exemplo acima instrui o Crux a retornar instâncias do tipo <code class="code">ArrayList</code> toda vez que um objeto do tipo <code class="code">List</code> 
			for solicitado para o container. Além disso, ele associa um provider para a classe <code class="code">MyBaseType</code>. Desta forma, sempre que um objeto 
			deste tipo precisar ser criado pelo container, este provider será acionado para criação do objeto.</p>

			<p>Para objetos de quaisquer outros tipos, além dos mapeados no arquivo de configuração acima, o Crux utilizará um provider padrão 
			que simplesmente executa o comando <code class="code">GWT.create()</code> para a criação do objeto do tipo solicitado.</p>
			
			<p>O exemplo abaixo mostra um provider que poderia ser usado para criação de objetos do tipo <code class="code">MyBaseType</code>:</p>

			<div class="example" id="iocConfigProvider"><div class="example-title">Example 6.8. Definição de um provider para o Container IoC</div><div class="example-contents">
			    
				<pre class="programlisting">
		 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> MyBaseTypeProvider <b><font color="#0000FF">extends</font></b> IocProvider<font color="#990000">&lt;</font>MyBaseType<font color="#990000">&gt;</font> <font color="#FF0000">{</font>

    <b><font color="#0000FF">public</font></b> MyBaseType <b><font color="#000000">get</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#FF0000">{</font>
        <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>Permissions<font color="#990000">.</font><b><font color="#000000">hasRole</font></b><font color="#990000">(</font><font color="#FF0000">"specialRole"</font><font color="#990000">)</font><font color="#990000">)</font> <font color="#FF0000">{</font>
            <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">new</font></b> <b><font color="#000000">MySpecialType</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
        <font color="#FF0000">}</font>
        <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">new</font></b> <b><font color="#000000">MySimpleType</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>
<font color="#FF0000">}</font>
</tt></pre>
				</pre>
			</div></div><br class="example-break"/>
			
			<p>Para adicionar uma nova classe de configuração, basta criar uma classe que estenda 
			<code class="code">IocContainerConfigurations</code>. Pode-se adicionar quantas classes de configuração se deseje. Estas classes devem 
			estar dentro do classpath da aplicação e o Crux automaticamente as identificará.</p>
			
			<p>As classes de configuração são executadas pelo Crux para a geração do código do container. Desta forma, elas são chamadas apenas durante
			a compilação do código java para javascript. Por isso, elas não necessitam estar na pasta que contém o código cliente da aplicação 
			(pasta <code class="code">client</code> do módulo GWT, que será convertida para javascript). Elas não são necessárias no código gerado, mas apenas durante 
			seu processo de geração. </p>
			
			<p>As classes configuradas no container, no entanto, são classes que serão usadas na execução do código no cliente, assim como as classes
			<code class="code">providers</code> definidas. Todas elas devem pertencer à pasta cliente da aplicação.</p>
		</section>
	</section>	
	
	<section class="sect1" id="sec_control_valuebind"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.3. Value Binding</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  Apresentar o @DataObject (@ValueObject no Crux 4), @ViewBinder (@ScreenBind no Crux 4) , ViewBindale.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Exemplos de bindPath nos arquivos de view.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Como ler e escrever para um DTO atraves de uma view bindable.</p>
			  </li></ul></div> 
		</div>

		
			
		<p>O Crux provê um mecanismo para ajudar a vincular os valores nos componentes da tela (view)
		e os objetos de dados (classes) e fazer atualizações através de comandos na 
		<span class="italic">Controller</span>.</p> 

		<p>Para criar um objeto de dados na <span class="italic">Controller</span> deve ser usada a
		anotação <span class="italic">@DataObjetct</span>.
		Desta forma o Crux pode popular os objetos de dados com os valores presentes nos componentes da tela 
		antes de rodar os métodos de tratamento de eventos. 
		Após a execução dos métodos de tratamento de eventos, os valores dos componentes da tela também podem
		ser atualizados com os novos valores gerados nos objetos de dados. 
		Essas atualizações são feitas a através dos comandos <span class="italic">getData</span> e 
		<span class="italic">setData</span>. A seguir é apresentado um exemplo de como usar esse recurso:</p>
		
		<p>Essa é uma classe de dados para uma "pessoa" com a anotação <span class="italic">@DataObjetct</span>.
		Ela possui dois atributos: name e phone.</p>

		<pre class="programlisting">

@DataObjetct("pessoa")
public class Person
{
        private String name;
        private String phone;
        
        public String getName() {
                return name;
        }
        public void setName(String name) {
                this.name = name;
        }
        public String getPhone() {
                return phone;
        }
        public void setPhone(String phone) {
                this.phone = phone;
        }
}

		</pre>

		<p>Na <span class="italic">View</span> "cadPerson.view.xml" o objeto de dados criado anteriormente é 
		vinculado pelo atributo <span class="italic">dataObject</span>, que no caso recebe o valor "pessoa".
		O componente "txtName" vai ser vinculado ao campo "name" do objeto "pessoa". Isso é feito pela parâmetro 
		<span class="italic">bindPath</span>. O mesmo será feito para o "phone". Veja o exemplo: </p>

		<pre class="programlisting">

&lt;v:view 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:v="http://www.cruxframework.org/view" 
	xmlns:core="http://www.cruxframework.org/crux" 
	xmlns:crux="http://www.cruxframework.org/crux/widgets"
	xmlns:gwt="http://www.cruxframework.org/crux/gwt"
	useController="myController" dataObject="pessoa" 
	title="cadPerson"&gt;
	&lt;crux:styledPanel id="outerPanel" height="200px"&gt;
		&lt;crux:formDisplay id="form"&gt;
			&lt;crux:entry label="Name:"&gt;
				&lt;gwt:textBox id="txtName" bindPath="name" width="200px"/&gt;
			&lt;/crux:entry&gt;
			&lt;crux:entry label="Phone:"&gt;
				&lt;gwt:textBox id="txtPhone" bindPath="phone" width="200px"/&gt;
			&lt;/crux:entry&gt;
			&lt;crux:entry horizontalAlignment="center"&gt;
				&lt;crux:button id="btnPrint" text="Back" onSelect="homeController.printData"/&gt;
			&lt;/crux:entry&gt;
		&lt;/crux:formDisplay&gt;
	&lt;/crux:styledPanel&gt;
&lt;/v:view&gt;

		</pre>

		<p>Na <span class="italic">Controller</span> quando o método <span class="italic">printData</span> é acionado,
		os dados que estão preenchidos nos campos da <span class="italic">view</span> devem ser impressos. 
		Para isso os dados devem ser adicionados à classe "pessoa" para serem manipulados. 
		Com o <span class="italic">getData</span> essa copia é feita de maneira atomática. Veja o exemplo:</p>

		<pre class="programlisting">

@Controller("myController")
public class MyClass
{
   	@Inject
	public CadPersonView cadP;
	
	@Expose
	public void printData()
	{
		Person p = cadP.cadPerson().getData();
		System.out.println(" Name: " + p.getName() );
	}
	
	public interface CadPersonView extends ViewAccessor
	{
	    BindableView&lt;Person&gt; cadPerson();
	}
}

		</pre>
		
		<p>Foi criada uma interface (CadPersonView) que extende a <span class="italic">ViewAccessor</span> para 
		a view "cadPerson". Um objeto (cadP) é injetado pela controller para permitir acesso aos campos da view.
		Quando o método <span class="italic">printData</span> é executado, os dados dos componentes da view são
		copiados para o objeto "p" (do tipo Person) através do <span class="italic">getData()</span>.</p>
			
		<p>Caso algum método execute alguma alteração nos dados do objeto eles podem ser novamente enviados para a
		tela (view) com	o comando <span class="italic">setData()</span>. 
		Veja a seguir um exemplo de um método que utiliza o setData: </p>

		<pre class="programlisting">

@Controller("myController")
public class MyClass
{
	// ...
	@Expose
	public void alterData()
	{
		Person p = new Person();
		p.setName("Anakin Skywalker");
		p.setPhone("1234-5678");
		cadP.cadPerson().setData(p);
	}
	// ...
}

		</pre>

	</section>

	<section class="sect1" id="sec_control_screen"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.4. Usando as Controllers na View</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  Como usar controllers nas views.</p>
			  </li><li class="listitem">
			    <p>ToDo :  A relacao entre views e controllers. Cada view define as 
			    controllers que deseja usar e cada objeto de view carregado cria 
			    sua propria referencia das controllers que utiliza.</p>
			  </li></ul></div> 
		</div>

	</section>

	<section class="sect1" id="sec_control_comunic"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.5. Comunicação entre controladores</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  Os WidgetAccessor, ViewAccessor, ControllerAccessor, @BindView e @BindRootView.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Um ....</p>
			  </li></ul></div> 
		</div>

	</section>

	<section class="sect1" id="sec_control_val"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.6. Validação</h2></div></div></div>
		

		<p>O Crux suporta a declaração de método de validação para os tratamentos de eventos da <span class="italic">Controller</span>.
		O método de validação é chamado antes do método de tratamento. Se ele for executado sem problemas, o método de tratamento 
		então é executado. Se o método de validação lançar alguma execeção a execução é finalizada e é exeibida a mensagem
		de retorno para o usuário através do <span class="italic">Crux Error Handler</span>. </p>	
			
		<p>Para criar um método de validação para o tratamento de um evento, basta usar a anotação 
		<span class="italic">@Validate</span> no método de tratamento do evento, informado qual é o método
		de validação a ser usado. Veja o exemplo a seguir: </p>

		<div class="example" id="controllerValidation"><div class="example-title">Example 6.9. ControllerValidation.java</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>@<b><font color="#000000">Controller</font></b><font color="#990000">(</font><font color="#FF0000">"clientHandler"</font><font color="#990000">)</font>
<b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> ControllerValidation <font color="#FF0000">{</font>
   @<b><font color="#000000">Validate</font></b><font color="#990000">(</font><font color="#FF0000">"myValidationMethod"</font><font color="#990000">)</font>
   @Expose
   <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">onClose</font></b><font color="#990000">(</font>CloseEvent<font color="#990000">&lt;</font>Window<font color="#990000">&gt;</font> event<font color="#990000">)</font> <font color="#FF0000">{</font>
       <i><font color="#9A1900">//</font></i><i><font color="#9A1900"> code here   </font></i>
   <font color="#FF0000">}</font>
      
   <b><font color="#0000FF">protected</font></b> <font color="#009900">void</font> <b><font color="#000000">myValidationMethod</font></b><font color="#990000">(</font>CloseEvent<font color="#990000">&lt;</font>Window<font color="#990000">&gt;</font> event<font color="#990000">)</font> <b><font color="#0000FF">throws</font></b> ValidateException <font color="#FF0000">{</font>
       <i><font color="#9A1900">//</font></i><i><font color="#9A1900"> code here   </font></i>
   <font color="#FF0000">}</font>
<font color="#FF0000">}</font>
</tt></pre>
			</pre>
		</div></div><br class="example-break"/>

		<p>Se não for passado parâmetro para a anotação <span class="italic">@Validate</span>, o Crux 
		irá procutar por um metodo com o nome: "validate" + "NomeMétodoTratamento". Veja o exemplo:	</p>

		<div class="example" id="controllerValidationDefault"><div class="example-title">Example 6.10. ControllerValidation.java</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>@<b><font color="#000000">Controller</font></b><font color="#990000">(</font><font color="#FF0000">"clientHandler"</font><font color="#990000">)</font>
<b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> ControllerValidation <font color="#FF0000">{</font>
   @Validate
   @Expose
   <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">onClose</font></b><font color="#990000">(</font>CloseEvent<font color="#990000">&lt;</font>Window<font color="#990000">&gt;</font> event<font color="#990000">)</font> <font color="#FF0000">{</font>
       <i><font color="#9A1900">//</font></i><i><font color="#9A1900"> code here   </font></i>
   <font color="#FF0000">}</font>
      
   <b><font color="#0000FF">protected</font></b> <font color="#009900">void</font> <b><font color="#000000">validateOnClose</font></b><font color="#990000">(</font><font color="#990000">)</font> <b><font color="#0000FF">throws</font></b> ValidateException <font color="#FF0000">{</font>
       <i><font color="#9A1900">//</font></i><i><font color="#9A1900"> code here   </font></i>
   <font color="#FF0000">}</font>
<font color="#FF0000">}</font>
</tt></pre>
			</pre>
		</div></div><br class="example-break"/>

		<p>Repare nos exemplos acima que os métodos de validação de eventos podem receber um parâmetro do tipo 
		do evento sendo tratado pelo método validado, caso seja necessário acessar alguma propriedade do evento durante a validação.</p>
	</section>

	<section class="sect1" id="sec_control_rpc_call"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.7. Chamada de Serviços RPC</h2></div></div></div>
		
					
		<p>Pode-se usar o suporte nativo do GWT a chamadas RPC e JSON para se comunicar com o servidor. O Crux, no entanto,
		acrescenta algumas funcionalidades ao mecanismo original de RPC do GWT para tornar este processo mais fácil.</p>
		
		<p>Com o Crux, é possível utilizar um <span class="italic">Front Controller</span> no lado do servidor.
		O uso deste <span class="italic">Front Controller</span> permite que se faça apenas um único mapeamento no arquivo web.xml da aplicação.
		Em outras palavras, não pé necessário adicionar uma nova declaração de servlet no 
		módulo GWT (nem no web.xml) para cada novo serviço declarado.</p>
		
		<p>Outra melhoria é que o uso do <span class="italic">Front Controller</span> libera o programador de precisar definir 
		um EntryPoint para cada serviço. O exemplo a seguir mostra como uma chamada RPC pode ser feita com o Crux:</p>

		<div class="example" id="serviceInterfaceRPC"><div class="example-title">Example 6.11. GreetingService.java</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">public</font></b> <b><font color="#0000FF">interface</font></b> GreetingService <b><font color="#0000FF">extends</font></b> RemoteService <font color="#FF0000">{</font>
	String <b><font color="#000000">getHelloMessage</font></b><font color="#990000">(</font>String name<font color="#990000">)</font><font color="#990000">;</font>
<font color="#FF0000">}</font>
</tt></pre>
			</pre>
		</div></div><br class="example-break"/>

		<p>Repare que a interface de serviço não utiliza a anotação <span class="italic">RemoteServiceRelativePath</span>, como
		seria esperado para uma interface de chamada de serviço feita com o GWT de forma convencional. O Crux assumirá que ele deve mapear
		as chamadas da interface de serviço para o <span class="italic">Front Controller</span>. Caso a anotação esteja presente na
		declaração da interface, o Crux a utilizará da forma convencional.</p>

		<div class="example" id="serviceInterfaceAsyncRPC"><div class="example-title">Example 6.12. GreetingServiceAsync.java</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">public</font></b> <b><font color="#0000FF">interface</font></b> GreetingServiceAsync <font color="#FF0000">{</font>
	<font color="#009900">void</font> <b><font color="#000000">getHelloMessage</font></b><font color="#990000">(</font>String name<font color="#990000">,</font> AsyncCallback<font color="#990000">&lt;</font>String<font color="#990000">&gt;</font> callback<font color="#990000">)</font><font color="#990000">;</font>
<font color="#FF0000">}</font>
</tt></pre>
			</pre>
		</div></div><br class="example-break"/>

		<p>A interface assíncrona deve ser criada da mesma forma como em chamadas RPC com o GWT puro.</p>

		<div class="example" id="controllerRPC"><div class="example-title">Example 6.13. MyController.java</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>@<b><font color="#000000">Controller</font></b><font color="#990000">(</font><font color="#FF0000">"myController"</font><font color="#990000">)</font>
<b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> MyController <font color="#FF0000">{</font>
    @Inject
    <b><font color="#0000FF">private</font></b> GreetingServiceAsync service<font color="#990000">;</font> 
    
    <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">setService</font></b><font color="#990000">(</font>GreetingServiceAsync service<font color="#990000">)</font> <font color="#FF0000">{</font>
    	<b><font color="#0000FF">this</font></b><font color="#990000">.</font>service <font color="#990000">=</font> service<font color="#990000">;</font>
    <font color="#FF0000">}</font>
    
    @Expose
    <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">sayHello</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#FF0000">{</font>
    	service<font color="#990000">.</font><b><font color="#000000">getHelloMessage</font></b><font color="#990000">(</font><font color="#FF0000">"Thiago"</font><font color="#990000">,</font> <b><font color="#0000FF">new</font></b> AsyncCallbackAdapter<font color="#990000">&lt;</font>String<font color="#990000">&gt;</font><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">)</font><font color="#FF0000">{</font>
    		@Override
    		<b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">onComplete</font></b><font color="#990000">(</font>String result<font color="#990000">)</font><font color="#FF0000">{</font>
    			Window<font color="#990000">.</font><b><font color="#000000">alert</font></b><font color="#990000">(</font>result<font color="#990000">)</font><font color="#990000">;</font>
    		<font color="#FF0000">}</font>
    	<font color="#FF0000">}</font><font color="#990000">)</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>

    @Expose
    <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">sayHello2</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#FF0000">{</font>
    	<i><font color="#9A1900">//</font></i><i><font color="#9A1900"> You can instantiate the service proxy with GWT.create too.</font></i>
    	GreetingServiceAsync service <font color="#990000">=</font> GWT<font color="#990000">.</font><b><font color="#000000">create</font></b><font color="#990000">(</font>GreetingService<font color="#990000">.</font><b><font color="#0000FF">class</font></b><font color="#990000">)</font><font color="#990000">;</font>
    	service<font color="#990000">.</font><b><font color="#000000">getHelloMessage</font></b><font color="#990000">(</font><font color="#FF0000">"Thiago"</font><font color="#990000">,</font> <b><font color="#0000FF">new</font></b> AsyncCallbackAdapter<font color="#990000">&lt;</font>String<font color="#990000">&gt;</font><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">)</font><font color="#FF0000">{</font>
    		@Override
    		<b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">onComplete</font></b><font color="#990000">(</font>String result<font color="#990000">)</font><font color="#FF0000">{</font>
    			Window<font color="#990000">.</font><b><font color="#000000">alert</font></b><font color="#990000">(</font>result<font color="#990000">)</font><font color="#990000">;</font>
    		<font color="#FF0000">}</font>
    	<font color="#FF0000">}</font><font color="#990000">)</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>
<font color="#FF0000">}</font>
</tt></pre>
			</pre>
		</div></div><br class="example-break"/>

		<p> A controller realiza a chamada de forma similar ao mecanismo convencional do GWT. Pode-se observar que foi utilizada a
		classe do Crux <span class="italic">AsyncCallbackAdapter</span> como callback para a operação solicitada. Este adapter 
		implementa um tratador de erros padrão para a operação que apenas delega para o tratador padrão de erros registrado junto ao Crux
		qualquer erro recebido.</p>  
		
		<p> A seção <a class="xref" href="#sec_model_rpc" title="7.1. Servidor acesso via RPC">Servidor acesso via RPC</a> demonstra como implementar, no servidor, a classe de serviço que irá atender a estas requisições feitas por este 
		código apresentado aqui.</p>  
	</section>

	<section class="sect1" id="sec_control_rest_call"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.8. Chamada de Serviços REST</h2></div></div></div>
		

		<p>O Crux oferece suporte a chamadas de serviços REST de forma simples e poderosa. É possível criar proxies capazes de abstrair a 
		comunicação com o servidor de maneira análoga ao mecanismo de RPC apresentado na seção
		<a class="xref" href="#sec_control_rpc_call" title="6.7. Chamada de Serviços RPC">Chamada de Serviços RPC</a>.</p>
		
		<p>Esta seção mostra como chamar um serviço REST a partir do lado cliente da aplicação.
		A seção <a class="xref" href="#sec_model_rest" title="7.2. Servidor acesso via REST">Servidor acesso via REST</a> mostra como esses servicos podem ser criados no servidor pelo Crux.</p>
		
		<p>Como exemplo, veja o seguinte serviço REST definido no lado server da aplicação:</p>
		<div class="example" id="serviceREST"><div class="example-title">Example 6.14. MyRestService.java</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>@<b><font color="#000000">RestService</font></b><font color="#990000">(</font><font color="#FF0000">"myService"</font><font color="#990000">)</font>
@<b><font color="#000000">Path</font></b><font color="#990000">(</font><font color="#FF0000">"test"</font><font color="#990000">)</font>
<b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> MyRestService <font color="#FF0000">{</font>
	@GET
	@<b><font color="#000000">Path</font></b><font color="#990000">(</font><font color="#FF0000">"hello/{userName}"</font><font color="#990000">)</font>
	<b><font color="#0000FF">public</font></b> String <b><font color="#000000">sayHello</font></b><font color="#990000">(</font>@<b><font color="#000000">PathParam</font></b><font color="#990000">(</font><font color="#FF0000">"userName"</font><font color="#990000">)</font> String userName<font color="#990000">)</font> <font color="#FF0000">{</font>
		<b><font color="#0000FF">return</font></b> <font color="#FF0000">"Hello "</font> <font color="#990000">+</font> userName <font color="#990000">+</font> <font color="#FF0000">"!"</font><font color="#990000">;</font>
	<font color="#FF0000">}</font>
<font color="#FF0000">}</font></tt></pre>
			</pre>
		</div></div><br class="example-break"/>
		
		<p>Repare que todas as informações necessárias para o mapeamento do serviço rest estão definidas nesta classe, 
		como path, tipo de método a ser utilizado, etc. Este mapeamento é melhor detalhado na seção 
		<a class="xref" href="#sec_model_rest" title="7.2. Servidor acesso via REST">Servidor acesso via REST</a>.</p>
		
		<p>O serviço declarado pode ser chamado pelo lado cliente da aplicação através da proxy REST, definida pela interface:</p>
		<div class="example" id="clientProxyREST"><div class="example-title">Example 6.15. MyRestClient.java</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>@<b><font color="#000000">TargetRestService</font></b><font color="#990000">(</font><font color="#FF0000">"myService"</font><font color="#990000">)</font>
<b><font color="#0000FF">public</font></b> <b><font color="#0000FF">interface</font></b> MyRestClient <b><font color="#0000FF">extends</font></b> RestProxy <font color="#FF0000">{</font>
	<font color="#009900">void</font> <b><font color="#000000">sayHello</font></b><font color="#990000">(</font>String userName<font color="#990000">,</font> Callback<font color="#990000">&lt;</font>String<font color="#990000">&gt;</font> callback<font color="#990000">)</font><font color="#990000">;</font>
<font color="#FF0000">}</font></tt></pre>
			</pre>
		</div></div><br class="example-break"/>
		
		<p>Esta interface informa através da anotação <span class="italic">@TargetRestService</span> o nome de serviço que será utilizado
		para mapear a classe alvo da invocação. Repare que o valor passado aqui deve coincidir com o valor declarado na classe de serviço no servidor, 
		na anotação <span class="italic">@RestService</span>.</p>
		
		<p>Observe que a interface cliente, usada para chamada do serviço, deve declarar métodos que possuam assinaturas compatíveis com as 
		assinaturas dos métodos de serviço definidos na classe do servidor. Para que as assinaturas sejam compatíveis, é necessário que:</p>
		
		<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
				<p>Os nomes dos métodos sejam iguais.</p>
			</li><li class="listitem">
				<p>Os métodos devem possuir listas de parâmetros compatíveis. Além dos parâmetros a serem passados para o método da classe de serviço 
				no servidor, o método da interface cliente deve adicionar um parâmetro à sua lista de parâmetros do tipo <code class="code">Callback&lt;T&gt;</code>, onde T deve ser
				compatível com o tipo de retorno do método da classe de serviço no servidor. </p>
			</li><li class="listitem">
				<p>Os parâmetros passados pela interface cliente para a classe no servidor devem ser de tipos compatíveis para serialização.</p>
			</li><li class="listitem">
				<p>O tipo de retorno dos métodos definidos na interface cliente deve ser void.</p>
			</li></ul></div>
		
		<p>Para utilizar a interface proxy em seu código, basta obter uma instância desta proxy através da anotação
		 <span class="italic">@Inject</span> ou de uma chamada ao método
		<span class="italic">GWT.create</span>, como pode ser observado no exemplo abaixo:</p>
		
		<div class="example" id="clientControllerREST"><div class="example-title">Example 6.16. MyController.java</div><div class="example-contents">
		    
			<pre class="programlisting">
	 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>@<b><font color="#000000">Controller</font></b><font color="#990000">(</font><font color="#FF0000">"myController"</font><font color="#990000">)</font>
<b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> MyController <font color="#FF0000">{</font>
    @Inject
    <b><font color="#0000FF">private</font></b> MyRestClient service<font color="#990000">;</font> 
    
    <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">setService</font></b><font color="#990000">(</font>MyRestClient service<font color="#990000">)</font> <font color="#FF0000">{</font>
    	<b><font color="#0000FF">this</font></b><font color="#990000">.</font>service <font color="#990000">=</font> service<font color="#990000">;</font>
    <font color="#FF0000">}</font>
    
    @Expose
    <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">sayHello</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#FF0000">{</font>
    	service<font color="#990000">.</font><b><font color="#000000">sayHello</font></b><font color="#990000">(</font><font color="#FF0000">"Thiago"</font><font color="#990000">,</font> <b><font color="#0000FF">new</font></b> Callback<font color="#990000">&lt;</font>String<font color="#990000">&gt;</font><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">)</font><font color="#FF0000">{</font>
    		@Override
    		<b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">onSuccess</font></b><font color="#990000">(</font>String result<font color="#990000">)</font><font color="#FF0000">{</font>
    			Window<font color="#990000">.</font><b><font color="#000000">alert</font></b><font color="#990000">(</font>result<font color="#990000">)</font><font color="#990000">;</font>
    		<font color="#FF0000">}</font>
    		@Override
    		<b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">onError</font></b><font color="#990000">(</font>Exception e<font color="#990000">)</font><font color="#FF0000">{</font>
    			Window<font color="#990000">.</font><b><font color="#000000">alert</font></b><font color="#990000">(</font>e<font color="#990000">.</font><b><font color="#000000">getMessage</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
    		<font color="#FF0000">}</font>
    	<font color="#FF0000">}</font><font color="#990000">)</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>

    @Expose
    <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">sayHello2</font></b><font color="#990000">(</font><font color="#990000">)</font> <font color="#FF0000">{</font>
    	<i><font color="#9A1900">//</font></i><i><font color="#9A1900"> You can instantiate the service proxy with GWT.create too.</font></i>
    	GreetingServiceAsync service <font color="#990000">=</font> GWT<font color="#990000">.</font><b><font color="#000000">create</font></b><font color="#990000">(</font>MyRestClient<font color="#990000">.</font><b><font color="#0000FF">class</font></b><font color="#990000">)</font><font color="#990000">;</font>
    	service<font color="#990000">.</font><b><font color="#000000">sayHello</font></b><font color="#990000">(</font><font color="#FF0000">"Thiago"</font><font color="#990000">,</font> <b><font color="#0000FF">new</font></b> Callback<font color="#990000">&lt;</font>String<font color="#990000">&gt;</font><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">)</font><font color="#FF0000">{</font>
    		@Override
    		<b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">onSuccess</font></b><font color="#990000">(</font>String result<font color="#990000">)</font><font color="#FF0000">{</font>
    			Window<font color="#990000">.</font><b><font color="#000000">alert</font></b><font color="#990000">(</font>result<font color="#990000">)</font><font color="#990000">;</font>
    		<font color="#FF0000">}</font>
    		@Override
    		<b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">onError</font></b><font color="#990000">(</font>Exception e<font color="#990000">)</font><font color="#FF0000">{</font>
    			Window<font color="#990000">.</font><b><font color="#000000">alert</font></b><font color="#990000">(</font>e<font color="#990000">.</font><b><font color="#000000">getMessage</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
    		<font color="#FF0000">}</font>
    	<font color="#FF0000">}</font><font color="#990000">)</font><font color="#990000">;</font>
    <font color="#FF0000">}</font>
<font color="#FF0000">}</font>
</tt></pre>
			</pre>
		</div></div><br class="example-break"/>
		
	</section>

</section>


<section class="chapter" id="chp_model"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Camada de Modelo</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="sect1"><a href="#sec_model_rpc">7.1. Servidor acesso via RPC</a></span></li><li><span class="sect1"><a href="#sec_model_rest">7.2. Servidor acesso via REST</a></span></li><li><span class="sect1"><a href="#sec_model_bd">7.3. Banco de Dados</a></span><ul><li><span class="sect2"><a href="#sec_model_bd_on">7.3.1. Banco Online</a></span></li><li><span class="sect2"><a href="#sec_model_bd_off">7.3.2. Banco Offline</a></span></li></ul></li><li><span class="sect1"><a href="#sec_model_setup">7.4. Setup</a></span><ul><li><span class="sect2"><a href="#sec_model_setup_webxml">7.4.1. Arquivo web.xml</a></span></li></ul></li></ul></div>
	

	<p> Codificando o Modelo</p>

	<section class="sect1" id="sec_model_rpc"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.1. Servidor acesso via RPC</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  O que é, quando e como usar.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Um ....</p>
			  </li></ul></div> 
		</div>
		
		
		
		<p>O Crux possui funcionalidades para facilitar o uso do 
		<a class="ulink" href="http://www.gwtproject.org/doc/latest/tutorial/RPC.html" target="_top">GWT RPC</a>, 
		como informado anteriormente.
		No lado do servidor, a principal diferença entre o GWT e o Crux é que a implementação da classe
		de serviço não precisa extender a <span class="italic">RemoteServiceServlet</span>.</p>
		
		
		<p> A <span class="italic">RemoteServiceServlet</span> não é nada mais do que um POJO
		e necessitam de ser implementedas as interfaces de negócio. Veja o exemplo a seguir:</p>

		<pre class="programlisting">

public interface GreetingService extends RemoteService{
        public String getHelloMessage(String name);
}

public class GreetingServiceImpl implements GreetingService{
   public String getHelloMessage(String name){
      return "Server says: Hello, " + name + "!'";
   }
}

		</pre>

		<p/>

		<p>Para encontrar qual implementação será usada pora uma dada interface o Crux
		busca por classes que implementam a interface e utiliza a primeira encontrada.
		Esse comportamento pode ser alterado como mostrado na seção ...</p>
		
		<p>Se for necessário que a classe de serviço acesse objetos dos tipos
        HttpServletRequest, HttpServletResponse ou HttpSession, também podem ser
        implementadas uma ou mais destas interfaces:</p>

		<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
		    <p> RequestAware - permite que o serviço tenha acesso a objetos HttpServletRequest.</p>
		  </li><li class="listitem">
		    <p> ResponseAware - permite que o serviço tenha acesso a objetos HttpServletResponse.</p>
		  </li><li class="listitem">
		    <p> SessionAware - permite que o serviço tenha acesso a objetos HttpSession.</p>
		  </li></ul></div> 
    
		<pre class="programlisting">

public class GreetingServiceImpl implements GreetingService, RequestAware, ResponseAware{
   private HttpServletRequest request;
   private HttpServletResponse response;
        
   public void setRequest(HttpServletRequest request){
      this.request = request;
   }
   public void setResponse(HttpServletResponse response){
      this.response = response;
   }
   ...   
}

		</pre>	
		
	</section>

	<section class="sect1" id="sec_model_rest"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.2. Servidor acesso via REST</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  O que é, quando e como usar.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Um ....</p>
			  </li></ul></div> 
		</div>
		
	</section>

	<section class="sect1" id="sec_model_bd"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.3. Banco de Dados</h2></div></div></div>
		

		<section class="sect2" id="sec_model_bd_on"><div class="titlepage"><div><div><h3 class="title">7.3.1. Banco Online</h3></div></div></div>
			

			<div class="note"><h3 class="title">Note</h3>
				<p> Aqui será inserido o seguinte conteúdo:</p>
				<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
				    <p>ToDo :  O que é, quando e como usar.</p>
				  </li><li class="listitem">
				    <p>ToDo :  Um ....</p>
				  </li></ul></div> 
			</div>
			
		</section>

		<section class="sect2" id="sec_model_bd_off"><div class="titlepage"><div><div><h3 class="title">7.3.2. Banco Offline</h3></div></div></div>
			

			<div class="note"><h3 class="title">Note</h3>
				<p> Aqui será inserido o seguinte conteúdo:</p>
				<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
				    <p>ToDo :  O que é, quando e como usar.</p>
				  </li><li class="listitem">
				    <p>ToDo :  Um ....</p>
				  </li></ul></div> 
			</div>
			
		</section>

	</section>

	<section class="sect1" id="sec_model_setup"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.4. Setup</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  O que é, quando e como usar.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Um ....</p>
			  </li></ul></div> 
		</div>
		
		
		
		<p>Para usar o Crux em uma aplicação é necessário prover os sequintes arquivos:</p>
		
		<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
			<p>Em produção, na pasta WEB-INF/lib:</p>
			<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
			    <p> crux-runtime.jar </p>
			  </li><li class="listitem">
			    <p> crux-runtime-deps.jar </p>
			  </li><li class="listitem">
			    <p> gwt-servlet.jar </p>
			  </li><li class="listitem">
			    <p> gwt-servlet-deps.jar </p>
			  </li></ul></div> 		    
		  </li><li class="listitem">
		    <p>Durante o desenvolvimento em alguma pasta desde que seja visível pelo GWT DevMode Console e pelas tarefas do ANT:</p>
			<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
			    <p> crux-dev.jar </p>
			  </li><li class="listitem">
			    <p> crux-dev-deps.jar </p>
			  </li><li class="listitem">
			    <p> crux-widgets.jar </p>
			  </li><li class="listitem">
			    <p> crux-themes.jar (optional) </p>
			  </li><li class="listitem">
			    <p> gwt-dev.jar </p>
			  </li><li class="listitem">
			    <p> gwt-user.jar </p>
			  </li></ul></div> 		    
		  </li></ul></div> 
		
		<section class="sect2" id="sec_model_setup_webxml"><div class="titlepage"><div><div><h3 class="title">7.4.1. Arquivo web.xml</h3></div></div></div>
			
			
			<p>Para configurar o Crux Front Controller é necessário inserir as seguintes 
			linhas no arquivo <span class="italic">web.xml</span>:</p>
			
			<pre class="programlisting">

  &lt;servlet&gt;
          &lt;servlet-name&gt;remoteServiceServlet&lt;/servlet-name&gt;
          &lt;servlet-class&gt;
                  org.cruxframework.crux.core.server.dispatch.RemoteServiceServlet
          &lt;/servlet-class&gt;
  &lt;/servlet&gt;

  &lt;servlet-mapping&gt;
          &lt;servlet-name&gt;remoteServiceServlet&lt;/servlet-name&gt;
          &lt;url-pattern&gt;*.rpc&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;

			</pre>

			<p>Também existem algumas configurações que são necessárias para executar
			a aplicação no ambiente de desenvolvimento: </p>
			
			<pre class="programlisting">

    &lt;context-param&gt; 
        &lt;param-name&gt;outputCharset&lt;/param-name&gt; 
        &lt;param-value&gt;UTF-8&lt;/param-value&gt; 
    &lt;/context-param&gt; 
    &lt;listener&gt;
        &lt;listener-class&gt;org.cruxframework.crux.core.rebind.DevModeInitializerListener&lt;/listener-class&gt;
    &lt;/listener&gt;
    &lt;filter&gt;
        &lt;display-name&gt;CruxFilter&lt;/display-name&gt;
        &lt;filter-name&gt;CruxFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.cruxframework.crux.core.server.CruxFilter&lt;/filter-class&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;CruxFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;

			</pre>
			
			<p>The above lines is needed by Crux Generators to find out which module 
			is being compiled. This is used for better performance. 
			Because that information is used only for compilation, it just needs to be 
			present in development environment.

			In development time, you will need to have this too: 
			</p>

			<pre class="programlisting">

  &lt;filter&gt;
          &lt;display-name&gt;DeclarativeUIFilter&lt;/display-name&gt;
          &lt;filter-name&gt;DeclarativeUIFilter&lt;/filter-name&gt;
          &lt;filter-class&gt;org.cruxframework.crux.core.declarativeui.filter.DeclarativeUIFilter&lt;/filter-class&gt;
  &lt;/filter&gt;
  &lt;filter-mapping&gt;
          &lt;filter-name&gt;DeclarativeUIFilter&lt;/filter-name&gt;
          &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;

			</pre>

			<p> This filter is used to transform your .crux.xml files in pure html files. 
			This process is only done in development. In a production environment, your 
			application can access the generated version of the page directly.

			The two above filters should not be used in a production environment. 
			Still, they are removed by an Ant task generated to deploy your project 
			(if you are using the *Crux* Project Generator).

			You can add an optional listener named InitializerListener to initialize 
			some Crux resources to turn the first call to application faster.
			</p>

			<pre class="programlisting">

   &lt;listener&gt;
      &lt;listener-class&gt;org.cruxframework.crux.core.server.InitializerListener&lt;/listener-class&gt;
   &lt;/listener&gt;

			</pre>


			<p>If you need i18n before the Crux FrontController Servlet, 
			you have to put these lines too: </p>

			<pre class="programlisting">

        &lt;filter&gt;
                &lt;display-name&gt;I18NFilter&lt;/display-name&gt;
                &lt;filter-name&gt;I18NFilter&lt;/filter-name&gt;
                &lt;filter-class&gt;org.cruxframework.crux.core.i18n.I18NFilter&lt;/filter-class&gt;
        &lt;/filter&gt;
        &lt;filter-mapping&gt;
                &lt;filter-name&gt;I18NFilter&lt;/filter-name&gt;
                &lt;url-pattern&gt;*.rpc&lt;/url-pattern&gt;
        &lt;/filter-mapping&gt;

			</pre>

			
		</section>
		
	</section>

</section>


<section class="chapter" id="chp_utils"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Utils</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="sect1"><a href="#sec_utils_file">8.1. File Utils</a></span></li><li><span class="sect1"><a href="#sec_utils_html">8.2. HTML Utils</a></span></li><li><span class="sect1"><a href="#sec_utils_stream">8.3. Stream Utils</a></span></li></ul></div>
	

	<p> Biblioteca de manipulação de objetos </p>

	<div class="note"><h3 class="title">Note</h3>
		<p> Aqui será inserido o seguinte conteúdo:</p>
		<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
		    <p>ToDo :  O que é, quando e como usar.</p>
		  </li><li class="listitem">
		    <p>ToDo :  Um ....</p>
		  </li></ul></div> 
	</div>	
	
	
	
	<section class="sect1" id="sec_utils_file"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.1. File Utils</h2></div></div></div>
		
	
		<p>http://halley.sysmap.com.br/javadoc-crux/org/cruxframework/crux/core/utils/FileUtils.html</p>
	
	</section>

	<section class="sect1" id="sec_utils_html"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.2. HTML Utils</h2></div></div></div>
		
	
		<p>http://halley.sysmap.com.br/javadoc-crux/org/cruxframework/crux/core/utils/HTMLUtils.html</p>
	
	</section>
	
	<section class="sect1" id="sec_utils_stream"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.3. Stream Utils</h2></div></div></div>
		
	
		<p>http://halley.sysmap.com.br/javadoc-crux/org/cruxframework/crux/core/utils/StreamUtils.html</p>
	
	</section>
	
</section>


<section class="chapter" id="chp_tools"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Ferramentas do Crux</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="sect1"><a href="#sec_tools_schcema">9.1. Generador de Schema</a></span></li><li><span class="sect1"><a href="#sec_tools_compiler">9.2. Compilador do Crux</a></span></li></ul></div>
	

	<p> Ferramentas do Crux Framework </p>

	<section class="sect1" id="sec_tools_schcema"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.1. Generador de Schema</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  O que é, quando e como usar.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Um ....</p>
			  </li></ul></div> 
		</div>
		
		
		
		<p>A ferramenta de geração de schema faz uma busca pelo <span class="italic">classpath</span> 
		do projeto por bibliotecas de componentes Crux e gera arquivos XDS para cada um deles.
		Também é gerado um XSD para cada arquivo de template encontrado.</p>
		
		<p>O gerados de schema pode ser executado de duas maneiras: pela linha de comando ou por uma tarefa Ant.</p>
		
		<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
		    <p> Chamando pela linha de comando, execute:</p>
			<pre class="programlisting">

  java org.cruxframework.crux.tools.schema.SchemaGenerator &lt;projectBaseDir&gt; &lt;outputDir&gt; 

			</pre>
		  </li><li class="listitem">
		    <p> Usando uma tarefa Ant "generate-schemas" primeiro é necessário criar um arquivo <span class="italic">build.xml</span>.</p>
		    <p> ...   generated by the Project Generator. SchemaGenerator also produces an eclipse catalog file containing all generated XSD files. </p>
		  </li></ol></div> 
					
	</section>

	<section class="sect1" id="sec_tools_compiler"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.2. Compilador do Crux</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  O que é, quando e como usar.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Um ....</p>
			  </li></ul></div> 
		</div>
		
		
		
		<p>O compilador do Crux converte todos os arquivos <span class="italic">.crux.xml</span> em arquivos <span class="italic">.html</span> 
		simples e então chama o compilador do GWT para gerar os  <span class="italic">javascript</span> para todos os módulos da aplicação. </p>
		
		<p> O CruxCompiler pode ser chanado de duas maneiras:</p>
		
		<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
		    <p> Chamado pela linha de comando:</p>
			<pre class="programlisting">

  java org.cruxframework.crux.tools.compile.CruxCompiler &lt;outputDir&gt; 

			</pre>
		  </li><li class="listitem">
		    <p> Usando uma tarefa Ant "compile-scripts", primeiro é necessário criar um arquivo <span class="italic">build.xml</span>.</p>
		  </li></ol></div> 

	</section>

</section>


<section class="chapter" id="chp_archetypes"><div class="titlepage"><div><div><h1 class="title">Chapter 10. Archetypes</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="sect1"><a href="#sec_archetypes_A">10.1. Application A</a></span></li><li><span class="sect1"><a href="#sec_archetypes_B">10.2. Application B</a></span></li></ul></div>
	

	<section class="sect1" id="sec_archetypes_A"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.1. Application A</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  O que é, quando e como usar.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Um ....</p>
			  </li></ul></div> 
		</div>
		
	</section>

	<section class="sect1" id="sec_archetypes_B"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.2. Application B</h2></div></div></div>
		
		
		<p> Aqui será inserido o seguinte conteúdo:</p>
		<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
		    <p>ToDo :  O que é, quando e como usar.</p>
		  </li><li class="listitem">
		    <p>ToDo :  Um ....</p>
		  </li></ul></div> 		

	</section>
</section>


<section class="chapter" id="chp_components"><div class="titlepage"><div><div><h1 class="title">Chapter 11. Componentes Crux</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><ul class="toc"><li><span class="sect1"><a href="#sec_compon_use">11.1. Como Usar</a></span></li><li><span class="sect1"><a href="#sec_compon_create">11.2. Criação de Componentes</a></span></li></ul></div>
	

	<section class="sect1" id="sec_compon_use"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.1. Como Usar</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo : O que é, quando e como usar.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Um ....</p>
			  </li></ul></div> 
		</div>
	</section>

	<section class="sect1" id="sec_compon_create"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.2. Criação de Componentes</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  O que é, quando e como usar.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Falar brevemente e referênciar o novo manual de componentes.</p>
			  </li></ul></div> 
		</div>
		
	</section>

</section>


<section class="glossary" id="d5e1125"><div class="titlepage"><div><div><h1 class="title">Glossary</h1></div></div></div>
	
	
	<div class="glosslist"><dl><dt id="GWT"><span class="glossterm">GWT</span></dt><dd class="glossdef"><p>
					O Google Web Toolkit é um ...
					<a class="ulink" href="http://www.gwtproject.org/doc/latest/DevGuide.html" target="_top">Documentação do GWT</a>
				</p></dd><dt><span class="glossterm" id="1TBS">1TBS</span></dt><dd class="glossdef"><p>The "One True Brace Style"</p><p>See Also indent style.</p></dd></dl></div>
</section>


<section class="appendix" id="apd_lib_comp"><div class="titlepage"><div><div><h1 class="title">Appendix A. Biblioteca de Componentes</h1></div></div></div>
	

	<p> Biblioteca de Componentes - apresentar e link para doc </p>

</section>


</div></body></html>