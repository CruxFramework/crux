<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>3.2. Manualmente</title><link rel="stylesheet" type="text/css" href="style.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"/><link rel="prev" href="ch03.xhtml" title="Chapter 3. Instalação e Configuração"/><link rel="next" href="ch04.xhtml" title="Chapter 4. Visão Arquitetura"/></head><body><header><div class="navheader"><table style="width: 100%; "><tr><th style="text-align: center; " colspan="3">3.2. Manualmente</th></tr><tr><td style="width: 20%; text-align: left; "><a accesskey="p" href="ch03.xhtml">Prev</a> </td><th style="width: 60%; text-align: center; ">Chapter 3. Instalação e Configuração</th><td style="width: 20%; text-align: right; "> <a accesskey="n" href="ch04.xhtml">Next</a></td></tr></table><hr/></div></header><section class="sect1" id="sec_inst_manual"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.2. Manualmente</h2></div></div></div>
		

		<p> Há também como instalar o Crux no seu projeto sem utilizar os
			archetypes do Maven.
			Geralmente, você precisará destes passos caso
			opte por não trabalhar com o Maven
			ou já tenha um projeto legado onde
			queira instalar o Crux.
		</p>

		<p> Para isso, siga os seguintes passos:</p>
		<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
				<p>
					Adicionar os JARs do Crux no buildpath do seu projeto. 
					Eles podem ser obtidos no site do Crux, na seção de Downloads. Vide
					seção <a class="link" href="ch01s02.xhtml" title="1.2. Crux Artefatos e Projetos">Crux Artefatos e Projetos</a>
				</p>
				<p>
					Os JARs <span class="italic">crux-dev.jar</span> e 
					<span class="italic">gwt-dev.jar</span> devem ser utilizados
					apenas em tempo de compilação, então devem estar localizados em
					uma	pasta build/lib	que deve estar no classpath da aplicação.
				</p>
				<p>
					Os jars <span class="italic">crux-runtime.jar</span>, 
					<span class="italic">gwt-runtime.jar</span> e 
					<span class="italic">gwt-servlet.jar</span>,
					devem ser utilizados em tempo de execução, então devem estar
					presentes na pasta WEB-INF/lib do war da aplicação.
				</p>
			</li><li class="listitem">
				<p>Adicionar as seguintes entradas no <span class="italic">web.xml</span>.</p>

				<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
						<p>O projeto deve ser codificado em UTF-8, o que também segue a
							recomendação do GWT de sempre trabalhar com arquivos .properties
							nesta codificação.
						</p>
						
						<div class="example" id="instConf-webxml-01"><div class="example-title">Example 3.1. web.xml</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;context-param&gt;</font></b>
	<b><font color="#0000FF">&lt;param-name&gt;</font></b>outputCharset<b><font color="#0000FF">&lt;/param-name&gt;</font></b>
	<b><font color="#0000FF">&lt;param-value&gt;</font></b>UTF-8<b><font color="#0000FF">&lt;/param-value&gt;</font></b>
<b><font color="#0000FF">&lt;/context-param&gt;</font></b></tt></pre>
							</pre>
						</div></div><br class="example-break"/>	
					</li><li class="listitem">
						<p>Adicionar o listener <code class="code">InitializerListener</code>, que será
							responsável por escanear as classes da aplicação e montar um mapa
							que será utilizado posteriormente durante o processamento do Crux. 
							É importante mencionar que em ambiente de produção este processamento
							não será realizado, uma	vez que as classes já se encontram
							compiladas.
						</p>
		
						<div class="example" id="instConf-webxml-02"><div class="example-title">Example 3.2. web.xml</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;listener&gt;</font></b>
	<b><font color="#0000FF">&lt;listener-class&gt;</font></b>org.cruxframework.crux.core.server.InitializerListener
	<b><font color="#0000FF">&lt;/listener-class&gt;</font></b>
<b><font color="#0000FF">&lt;/listener&gt;</font></b>
</tt></pre>
							</pre>
						</div></div><br class="example-break"/>	
					</li><li class="listitem">
						<p>Caso haja chamadas RPC na aplicação, deve ser adicionado o
							servlet do Crux <code class="code">RemoteServiceServlet</code>, que é
							uma especialização do Servlet de mesmo nome do GWT, adicionando novas
							funcionalidades como tokens de sincronização,
							pré-processadores, etc.
						</p>
		
						<div class="example" id="instConf-webxml-03"><div class="example-title">Example 3.3. web.xml</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;servlet&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-name&gt;</font></b>remoteServiceServlet<b><font color="#0000FF">&lt;/servlet-name&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-class&gt;</font></b>org.cruxframework.crux.core.server.dispatch.RemoteServiceServlet
	<b><font color="#0000FF">&lt;/servlet-class&gt;</font></b>
<b><font color="#0000FF">&lt;/servlet&gt;</font></b>

<b><font color="#0000FF">&lt;servlet-mapping&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-name&gt;</font></b>remoteServiceServlet<b><font color="#0000FF">&lt;/servlet-name&gt;</font></b>
	<b><font color="#0000FF">&lt;url-pattern&gt;</font></b>*.rpc<b><font color="#0000FF">&lt;/url-pattern&gt;</font></b>
<b><font color="#0000FF">&lt;/servlet-mapping&gt;</font></b></tt></pre>
							</pre>
						</div></div><br class="example-break"/>
					</li><li class="listitem">
						<p>Caso haja chamadas REST na aplicação, deve ser adicionado o
							servlet do Crux RestServlet, que é responsável por processar as
							requisições REST vindas do servidor. Este servlet tratará de diversas
							funcionalidades de segurança, deserialização dos objetos e a eventual
							chamada do método correspondente na classe de serviço.
						</p>
		
						<div class="example" id="instConf-webxml-04"><div class="example-title">Example 3.4. web.xml</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;servlet&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-name&gt;</font></b>restServiceServlet<b><font color="#0000FF">&lt;/servlet-name&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-class&gt;</font></b>org.cruxframework.crux.core.server.rest.servlet.RestServlet
	<b><font color="#0000FF">&lt;/servlet-class&gt;</font></b>
	<b><font color="#0000FF">&lt;init-param&gt;</font></b>
		<b><font color="#0000FF">&lt;param-name&gt;</font></b>preprocessors<b><font color="#0000FF">&lt;/param-name&gt;</font></b>
		<b><font color="#0000FF">&lt;param-value&gt;</font></b>br.com.mca.comissionamento.core.server.infrastructure.SecurityPreprocessor
		<b><font color="#0000FF">&lt;/param-value&gt;</font></b>
	<b><font color="#0000FF">&lt;/init-param&gt;</font></b>
<b><font color="#0000FF">&lt;/servlet&gt;</font></b>

<b><font color="#0000FF">&lt;servlet-mapping&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-name&gt;</font></b>restServiceServlet<b><font color="#0000FF">&lt;/servlet-name&gt;</font></b>
	<b><font color="#0000FF">&lt;url-pattern&gt;</font></b>/rest/*<b><font color="#0000FF">&lt;/url-pattern&gt;</font></b>
<b><font color="#0000FF">&lt;/servlet-mapping&gt;</font></b></tt></pre>
							</pre>
						</div></div><br class="example-break"/>
					</li><li class="listitem">
						<p>Esta é uma configuração opcional e expôe um servlet para
							testes de views, onde o desenvolvedor pode informar apenas o nome do
							módulo e o nome da view na url e o Crux a carregará e devolverá a view
							desejada para o cliente.
						</p>
		
						<div class="example" id="instConf-webxml-05"><div class="example-title">Example 3.5. web.xml</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;servlet&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-name&gt;</font></b>testViewServlet<b><font color="#0000FF">&lt;/servlet-name&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-class&gt;</font></b>org.cruxframework.crux.module.development.ModulesViewTester
	<b><font color="#0000FF">&lt;/servlet-class&gt;</font></b>
<b><font color="#0000FF">&lt;/servlet&gt;</font></b>
<b><font color="#0000FF">&lt;servlet-mapping&gt;</font></b>
	<b><font color="#0000FF">&lt;servlet-name&gt;</font></b>testViewServlet<b><font color="#0000FF">&lt;/servlet-name&gt;</font></b>
	<b><font color="#0000FF">&lt;url-pattern&gt;</font></b>/viewTester/*<b><font color="#0000FF">&lt;/url-pattern&gt;</font></b>
<b><font color="#0000FF">&lt;/servlet-mapping&gt;</font></b></tt></pre>
							</pre>
						</div></div><br class="example-break"/>
					</li><li class="listitem">
						
						<p>Esta é uma configuração apenas para o ambiente de
							desenvolvimento e expôe um servlet para
							cadastrar a configuração de
							widgets para o DevMode.
						</p>
		
						<div class="example" id="instConf-webxml-06"><div class="example-title">Example 3.6. web.xml</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;listener&gt;</font></b>
	<b><font color="#0000FF">&lt;listener-class&gt;</font></b>org.cruxframework.crux.core.server.DevModeInitializerListener
	<b><font color="#0000FF">&lt;/listener-class&gt;</font></b>
<b><font color="#0000FF">&lt;/listener&gt;</font></b></tt></pre>
							</pre>
						</div></div><br class="example-break"/>
					</li><li class="listitem">
						<p>Esta é uma configuração apenas para o ambiente de
							desenvolvimento e expõe um filtro
							utilizado para localizar recursos
							dentro da estrutura de módulos.
						</p>
		
						<div class="example" id="instConf-webxml-07"><div class="example-title">Example 3.7. web.xml</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;filter&gt;</font></b>
	<b><font color="#0000FF">&lt;display-name&gt;</font></b>ModulesDeclarativeUIFilter<b><font color="#0000FF">&lt;/display-name&gt;</font></b>
	<b><font color="#0000FF">&lt;filter-name&gt;</font></b>ModulesDeclarativeUIFilter<b><font color="#0000FF">&lt;/filter-name&gt;</font></b>
	<b><font color="#0000FF">&lt;filter-class&gt;</font></b>org.cruxframework.crux.module.filter.ModulesDeclarativeUIFilter
	<b><font color="#0000FF">&lt;/filter-class&gt;</font></b>
<b><font color="#0000FF">&lt;/filter&gt;</font></b>

<b><font color="#0000FF">&lt;filter-mapping&gt;</font></b>
	<b><font color="#0000FF">&lt;filter-name&gt;</font></b>ModulesDeclarativeUIFilter<b><font color="#0000FF">&lt;/filter-name&gt;</font></b>
	<b><font color="#0000FF">&lt;url-pattern&gt;</font></b>*.html<b><font color="#0000FF">&lt;/url-pattern&gt;</font></b>
<b><font color="#0000FF">&lt;/filter-mapping&gt;</font></b>
</tt></pre>
							</pre>
						</div></div><br class="example-break"/>
					</li></ul></div>
				
			</li><li class="listitem">
				<p>Devem ser adicionados dois arquivos na pasta de source da	aplicação.
				</p>
				
				<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
						<p>
							<span class="bold"><strong>Crux.properties</strong></span>: reponsável por definir as configurações utilizadas
							pelo Crux. Exemplo:
						</p>
							
						<div class="example" id="instConf-cruxprop"><div class="example-title">Example 3.8. Crux.properties</div><div class="example-contents">
						    
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt>#Parâmetro obrigatório: define qual será a classe responsável por processar as dependências do classpath.
classPathResolver=org.cruxframework.crux.module.classpath.ModuleClassPathResolver

#Parâmetro opcional: ???
enableWebRootScannerCache=false

#Indica que a estratégia de busca dos recursos deve se basear em um ambiente de cluster.
restServiceResourceStateHandler=org.cruxframework.crux.core.server.rest.state.ClusteredResourceStateHandler
</tt></pre>
							</pre>
						</div></div><br class="example-break"/>
					</li><li class="listitem">	
				
						<p>
							<span class="bold"><strong>CruxModuleConfig.properties</strong></span>: é utilizado somente durante o
							desenvolvimento. Nele é definido quais módulos serão
							utilizados durante a execução e	compilação da aplicação. Exemplo:
						</p>
							
						<div class="example" id="instConf-cruxconf"><div class="example-title">Example 3.9. CruxModuleConfig.properties</div><div class="example-contents">
						    
						    <pre class="programlisting">
developmentModules=moduleA,moduleB,moduleC
							</pre>
						</div></div><br class="example-break"/>
					</li></ul></div>
								
			</li><li class="listitem">
				<p>Deve ser adicionado um launcher para iniciar a aplicação.
					Este arquivo conterá as configurações para executar a aplicação
					através do DevMode. Exemplo:
				</p>
				
				<div class="example" id="instConf-launcher"><div class="example-title">Example 3.10. app.launcher</div><div class="example-contents">
				        
					<pre class="programlisting">
			 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#000080">&lt;?xml</font></b> <font color="#009900">version</font>=<font color="#FF0000">"</font><font color="#FF0000">1.0</font><font color="#FF0000">"</font> <font color="#009900">encoding</font>=<font color="#FF0000">"</font><font color="#FF0000">UTF-8</font><font color="#FF0000">"</font> <font color="#009900">standalone</font>=<font color="#FF0000">"</font><font color="#FF0000">no</font><font color="#FF0000">"</font><b><font color="#000080">?&gt;</font></b>
<b><font color="#0000FF">&lt;launchConfiguration</font></b> <font color="#009900">type</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.localJavaApplication</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
    <b><font color="#0000FF">&lt;listAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.debug.core.MAPPED_RESOURCE_PATHS</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
        <b><font color="#0000FF">&lt;listEntry</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">/&lt;&lt;APPLICATION_NAME&gt;&gt;</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;/listAttribute&gt;</font></b>
    <b><font color="#0000FF">&lt;listAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.debug.core.MAPPED_RESOURCE_TYPES</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
        <b><font color="#0000FF">&lt;listEntry</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">4</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;/listAttribute&gt;</font></b>
    <b><font color="#0000FF">&lt;booleanAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.debug.core.appendEnvironmentVariables</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">true</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;booleanAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.debug.ui.CONSIDER_INHERITED_MAIN</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">true</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;booleanAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.debug.ui.INCLUDE_EXTERNAL_JARS</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">true</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;booleanAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.ATTR_USE_START_ON_FIRST_THREAD</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">true</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;listAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.CLASSPATH</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
        ...
    <b><font color="#0000FF">&lt;/listAttribute&gt;</font></b>
    <b><font color="#0000FF">&lt;booleanAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.DEFAULT_CLASSPATH</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">false</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;stringAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.MAIN_TYPE</font><font color="#FF0000">"</font> 
                     <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">org.cruxframework.crux.module.launch.ModulesLauncher</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;stringAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.PROGRAM_ARGUMENTS</font><font color="#FF0000">"</font>
       <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-startupUrl &lt;&lt;APPLICATION_MODULE_NAME&gt;&gt;/index.html -war target/&lt;&lt;APPLICATION_NAME&gt;&gt; -gen generated -bindAddress 0.0.0.0 -logLevel INFO</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;stringAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.PROJECT_ATTR</font><font color="#FF0000">"</font> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">MyApp</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;stringAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.SOURCE_PATH_PROVIDER</font><font color="#FF0000">"</font> 
                     <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.m2e.launchconfig.sourcepathProvider</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
    <b><font color="#0000FF">&lt;stringAttribute</font></b> <font color="#009900">key</font>=<font color="#FF0000">"</font><font color="#FF0000">org.eclipse.jdt.launching.VM_ARGUMENTS</font><font color="#FF0000">"</font> 
       <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-Xss10768k -Xms800M -Xmx800M -Xdebug -DCrux.dev=true -Djava.naming.factory.initial=org.mortbay.naming.InitialContextFactory -DdebugEnabled=true</font><font color="#FF0000">"</font> <b><font color="#0000FF">/&gt;</font></b>
<b><font color="#0000FF">&lt;/launchConfiguration&gt;</font></b>
</tt></pre>
					</pre>
				</div></div><br class="example-break"/>
				
				<p>No exemplo o padrão <code class="code"> &lt;&lt;APPLICATION_NAME&gt;&gt;</code> 
				deve ser substituído pelo nome da aplicação.</p>
			</li><li class="listitem">
                <p>Para gerar o WAR da aplicação, os seguintes métodos estão disponíveis:
                </p>
                
                <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
					
		                <p>
		                    <span class="bold"><strong>CruxCompiler</strong></span>: Este é o compilador do Crux. 
		                    Ele pode ser chamado via linha de comando, scripts MAVEN, ANT, etc.
		                    Abaixo segue um exemplo de um script ANT:
		                </p>
		                
		                <div class="example" id="instConf-build01"><div class="example-title">Example 3.11. build.xml : CruxCompiler</div><div class="example-contents">
						        
							<pre class="programlisting">
					 			<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;cruxmodulecompiler</font></b> <font color="#009900">srcDir</font>=<font color="#FF0000">"</font><font color="#FF0000">...</font><font color="#FF0000">"</font> <font color="#009900">outputDir</font>=<font color="#FF0000">"</font><font color="#FF0000">...</font><font color="#FF0000">"</font> <font color="#009900">webDir</font>=<font color="#FF0000">"</font><font color="#FF0000">...</font><font color="#FF0000">"</font> 
                    <font color="#009900">keepPagesGeneratedFiles</font>=<font color="#FF0000">"</font><font color="#FF0000">true</font><font color="#FF0000">"</font> <font color="#009900">inputCharset</font>=<font color="#FF0000">"</font><font color="#FF0000">UTF-8</font><font color="#FF0000">"</font> <font color="#009900">outputCharset</font>=<font color="#FF0000">"</font><font color="#FF0000">UTF-8</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>

	<i><font color="#9A1900">&lt;!--</font></i><i><font color="#9A1900"> VM parameters. For intancem if you need to modify memory settings </font></i><i><font color="#9A1900">--&gt;</font></i>
	<b><font color="#0000FF">&lt;jvmarg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-Xmx2560M</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;jvmarg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-Xms512M</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;jvmarg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-XX:MaxPermSize=256m</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;jvmarg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-XX:+UseParNewGC</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;jvmarg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-XX:+UseConcMarkSweepGC</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;jvmarg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-XX:+UseGCOverheadLimit</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	
	<i><font color="#9A1900">&lt;!--</font></i><i><font color="#9A1900"> GWT and CRUX parameters </font></i><i><font color="#9A1900">--&gt;</font></i>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-gen</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">/temp/crux/gen</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-style</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">DETAILED</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-logLevel</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">DEBUG</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-localWorkers</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">8</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;arg</font></b> <font color="#009900">value</font>=<font color="#FF0000">"</font><font color="#FF0000">-draftCompile</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
<b><font color="#0000FF">&lt;/cruxmodulecompiler&gt;</font></b></tt></pre>
							</pre>
						</div></div><br class="example-break"/>
		                
                	</li><li class="listitem">
						<p>
						    <span class="bold"><strong>ServiceMapper</strong></span>: Este é uma ferramenta para criar um mapa das 
						    interfaces remotas de serviço (RPC ou REST). Estes mapas serão armazenados 
						    em arquivos "crux-rest" e "crux-remote" e são necessários durante a execução do código 
						    compilado. Abaixo segue um exemplo de um script ANT:
						</p>

						<div class="example" id="instConf-build02"><div class="example-title">Example 3.12. build.xml : ServiceMapper </div><div class="example-contents">
						        
							<pre class="programlisting">
									<!-- Generator: GNU source-highlight 2.1.2
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite --><pre xmlns=""><tt><b><font color="#0000FF">&lt;serviceMapper</font></b> <font color="#009900">projectDir</font>=<font color="#FF0000">"</font><font color="#FF0000">...</font><font color="#FF0000">"</font><b><font color="#0000FF">&gt;</font></b>
	<b><font color="#0000FF">&lt;classpath&gt;</font></b>
		<b><font color="#0000FF">&lt;path</font></b> <font color="#009900">refid</font>=<font color="#FF0000">"</font><font color="#FF0000">build.classpath</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
		<b><font color="#0000FF">&lt;pathelement</font></b> <font color="#009900">path</font>=<font color="#FF0000">"</font><font color="#FF0000">...</font><font color="#FF0000">"</font><b><font color="#0000FF">/&gt;</font></b>
	<b><font color="#0000FF">&lt;/classpath&gt;</font></b>
<b><font color="#0000FF">&lt;/serviceMapper&gt;</font></b></tt></pre>
							</pre>
						</div></div><br class="example-break"/>
						          
					</li></ul></div>  

            </li></ol></div>

	</section><footer><div class="navfooter"><hr/><table style="width: 100%; "><tr><td style="width: 40%; text-align: left; "><a accesskey="p" href="ch03.xhtml">Prev</a> </td><td style="width: 20%; text-align: center; "><a accesskey="u" href="ch03.xhtml">Up</a></td><td style="width: 40%; text-align: right; "> <a accesskey="n" href="ch04.xhtml">Next</a></td></tr><tr><td style="width: 40%; text-align: left; vertical-align: top; ">Chapter 3. Instalação e Configuração </td><td style="width: 20%; text-align: center; "><a accesskey="h" href="index.xhtml">Home</a></td><td style="width: 40%; text-align: right; vertical-align: top; "> Chapter 4. Visão Arquitetura</td></tr></table></div></footer></body></html>