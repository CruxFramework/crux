<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>7.4. Setup</title><link rel="stylesheet" type="text/css" href="style.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"/><link rel="prev" href="ch07s03.xhtml" title="7.3. Banco de Dados"/><link rel="next" href="ch08.xhtml" title="Chapter 8. Utils"/></head><body><header><div class="navheader"><table style="width: 100%; "><tr><th style="text-align: center; " colspan="3">7.4. Setup</th></tr><tr><td style="width: 20%; text-align: left; "><a accesskey="p" href="ch07s03.xhtml">Prev</a> </td><th style="width: 60%; text-align: center; ">Chapter 7. Camada de Modelo</th><td style="width: 20%; text-align: right; "> <a accesskey="n" href="ch08.xhtml">Next</a></td></tr></table><hr/></div></header><section class="sect1" id="sec_model_setup"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.4. Setup</h2></div></div></div>
		

		<div class="note"><h3 class="title">Note</h3>
			<p> Aqui será inserido o seguinte conteúdo:</p>
			<div class="itemizedlist"><ul style="list-style-type: disc; " class="itemizedlist"><li class="listitem">
			    <p>ToDo :  O que é, quando e como usar.</p>
			  </li><li class="listitem">
			    <p>ToDo :  Um ....</p>
			  </li></ul></div> 
		</div>
		
		
		
		<p>Para usar o Crux em uma aplicação é necessário prover os sequintes arquivos:</p>
		
		<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
			<p>Em produção, na pasta WEB-INF/lib:</p>
			<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
			    <p> crux-runtime.jar </p>
			  </li><li class="listitem">
			    <p> crux-runtime-deps.jar </p>
			  </li><li class="listitem">
			    <p> gwt-servlet.jar </p>
			  </li><li class="listitem">
			    <p> gwt-servlet-deps.jar </p>
			  </li></ul></div> 		    
		  </li><li class="listitem">
		    <p>Durante o desenvolvimento em alguma pasta desde que seja visível pelo GWT DevMode Console e pelas tarefas do ANT:</p>
			<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
			    <p> crux-dev.jar </p>
			  </li><li class="listitem">
			    <p> crux-dev-deps.jar </p>
			  </li><li class="listitem">
			    <p> crux-widgets.jar </p>
			  </li><li class="listitem">
			    <p> crux-themes.jar (optional) </p>
			  </li><li class="listitem">
			    <p> gwt-dev.jar </p>
			  </li><li class="listitem">
			    <p> gwt-user.jar </p>
			  </li></ul></div> 		    
		  </li></ul></div> 
		
		<section class="sect2" id="sec_model_setup_webxml"><div class="titlepage"><div><div><h3 class="title">7.4.1. Arquivo web.xml</h3></div></div></div>
			
			
			<p>Para configurar o Crux Front Controller é necessário inserir as seguintes 
			linhas no arquivo <span class="italic">web.xml</span>:</p>
			
			<pre class="programlisting">

  &lt;servlet&gt;
          &lt;servlet-name&gt;remoteServiceServlet&lt;/servlet-name&gt;
          &lt;servlet-class&gt;
                  org.cruxframework.crux.core.server.dispatch.RemoteServiceServlet
          &lt;/servlet-class&gt;
  &lt;/servlet&gt;

  &lt;servlet-mapping&gt;
          &lt;servlet-name&gt;remoteServiceServlet&lt;/servlet-name&gt;
          &lt;url-pattern&gt;*.rpc&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;

			</pre>

			<p>Também existem algumas configurações que são necessárias para executar
			a aplicação no ambiente de desenvolvimento: </p>
			
			<pre class="programlisting">

    &lt;context-param&gt; 
        &lt;param-name&gt;outputCharset&lt;/param-name&gt; 
        &lt;param-value&gt;UTF-8&lt;/param-value&gt; 
    &lt;/context-param&gt; 
    &lt;listener&gt;
        &lt;listener-class&gt;org.cruxframework.crux.core.rebind.DevModeInitializerListener&lt;/listener-class&gt;
    &lt;/listener&gt;
    &lt;filter&gt;
        &lt;display-name&gt;CruxFilter&lt;/display-name&gt;
        &lt;filter-name&gt;CruxFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.cruxframework.crux.core.server.CruxFilter&lt;/filter-class&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;CruxFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;

			</pre>
			
			<p>The above lines is needed by Crux Generators to find out which module 
			is being compiled. This is used for better performance. 
			Because that information is used only for compilation, it just needs to be 
			present in development environment.

			In development time, you will need to have this too: 
			</p>

			<pre class="programlisting">

  &lt;filter&gt;
          &lt;display-name&gt;DeclarativeUIFilter&lt;/display-name&gt;
          &lt;filter-name&gt;DeclarativeUIFilter&lt;/filter-name&gt;
          &lt;filter-class&gt;org.cruxframework.crux.core.declarativeui.filter.DeclarativeUIFilter&lt;/filter-class&gt;
  &lt;/filter&gt;
  &lt;filter-mapping&gt;
          &lt;filter-name&gt;DeclarativeUIFilter&lt;/filter-name&gt;
          &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;

			</pre>

			<p> This filter is used to transform your .crux.xml files in pure html files. 
			This process is only done in development. In a production environment, your 
			application can access the generated version of the page directly.

			The two above filters should not be used in a production environment. 
			Still, they are removed by an Ant task generated to deploy your project 
			(if you are using the *Crux* Project Generator).

			You can add an optional listener named InitializerListener to initialize 
			some Crux resources to turn the first call to application faster.
			</p>

			<pre class="programlisting">

   &lt;listener&gt;
      &lt;listener-class&gt;org.cruxframework.crux.core.server.InitializerListener&lt;/listener-class&gt;
   &lt;/listener&gt;

			</pre>


			<p>If you need i18n before the Crux FrontController Servlet, 
			you have to put these lines too: </p>

			<pre class="programlisting">

        &lt;filter&gt;
                &lt;display-name&gt;I18NFilter&lt;/display-name&gt;
                &lt;filter-name&gt;I18NFilter&lt;/filter-name&gt;
                &lt;filter-class&gt;org.cruxframework.crux.core.i18n.I18NFilter&lt;/filter-class&gt;
        &lt;/filter&gt;
        &lt;filter-mapping&gt;
                &lt;filter-name&gt;I18NFilter&lt;/filter-name&gt;
                &lt;url-pattern&gt;*.rpc&lt;/url-pattern&gt;
        &lt;/filter-mapping&gt;

			</pre>

			
		</section>
		
	</section><footer><div class="navfooter"><hr/><table style="width: 100%; "><tr><td style="width: 40%; text-align: left; "><a accesskey="p" href="ch07s03.xhtml">Prev</a> </td><td style="width: 20%; text-align: center; "><a accesskey="u" href="ch07.xhtml">Up</a></td><td style="width: 40%; text-align: right; "> <a accesskey="n" href="ch08.xhtml">Next</a></td></tr><tr><td style="width: 40%; text-align: left; vertical-align: top; ">7.3. Banco de Dados </td><td style="width: 20%; text-align: center; "><a accesskey="h" href="index.xhtml">Home</a></td><td style="width: 40%; text-align: right; vertical-align: top; "> Chapter 8. Utils</td></tr></table></div></footer></body></html>